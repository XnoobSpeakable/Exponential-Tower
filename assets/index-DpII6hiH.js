var Y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ir=Y((ur,R)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var t={maxOps:1e3,serializeMode:1,debug:0},O="[ExpantaNumError] ",w=O+"Invalid argument: ",$=/^[-\+]*(Infinity|NaN|(J+|J\^\d+ )?(10(\^+|\{[1-9]\d*\})|\(10(\^+|\{[1-9]\d*\})\)\^[1-9]\d* )*((\d+(\.\d*)?|\d*\.\d+)?([Ee][-\+]*))*(0|\d+(\.\d*)?|\d*\.\d+))$/,v=9007199254740991,A=Math.log10(v),u={},f={},m={};m.ZERO=0;m.ONE=1;m.E=Math.E;m.LN2=Math.LN2;m.LN10=Math.LN10;m.LOG2E=Math.LOG2E;m.LOG10E=Math.LOG10E;m.PI=Math.PI;m.SQRT1_2=Math.SQRT1_2;m.SQRT2=Math.SQRT2;m.MAX_SAFE_INTEGER=v;m.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER;m.NaN=Number.NaN;m.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;m.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;m.E_MAX_SAFE_INTEGER="e"+v;m.EE_MAX_SAFE_INTEGER="ee"+v;m.TETRATED_MAX_SAFE_INTEGER="10^^"+v;m.GRAHAMS_NUMBER="J^63 10^^^(10^)^7625597484984 3638334640023.7783";u.absoluteValue=u.abs=function(){var r=this.clone();return r.sign=1,r};f.absoluteValue=f.abs=function(r){return new t(r).abs()};u.negate=u.neg=function(){var r=this.clone();return r.sign=r.sign*-1,r};f.negate=f.neg=function(r){return new t(r).neg()};u.compareTo=u.cmp=function(r){if(r instanceof t||(r=new t(r)),isNaN(this.array[0][1])||isNaN(r.array[0][1]))return NaN;if(this.array[0][1]==1/0&&r.array[0][1]!=1/0)return this.sign;if(this.array[0][1]!=1/0&&r.array[0][1]==1/0)return-r.sign;if(this.array.length==1&&this.array[0][1]===0&&r.array.length==1&&r.array[0][1]===0)return 0;if(this.sign!=r.sign)return this.sign;var e=this.sign,n;if(this.layer>r.layer)n=1;else if(this.layer<r.layer)n=-1;else{for(var a,i,s=0,o=Math.min(this.array.length,r.array.length);s<o;++s)if(a=this.array[this.array.length-1-s],i=r.array[r.array.length-1-s],a[0]>i[0]||a[0]==i[0]&&a[1]>i[1]){n=1;break}else if(a[0]<i[0]||a[0]==i[0]&&a[1]<i[1]){n=-1;break}n===void 0&&(this.array.length==r.array.length?n=0:this.array.length>r.array.length?(a=this.array[this.array.length-o],a[0]>=1||a[1]>10?n=1:n=-1):(a=r.array[r.array.length-o],a[0]>=1||a[1]>10?n=-1:n=1))}return n*e};f.compare=f.cmp=function(r,e){return new t(r).cmp(e)};u.greaterThan=u.gt=function(r){return this.cmp(r)>0};f.greaterThan=f.gt=function(r,e){return new t(r).gt(e)};u.greaterThanOrEqualTo=u.gte=function(r){return this.cmp(r)>=0};f.greaterThanOrEqualTo=f.gte=function(r,e){return new t(r).gte(e)};u.lessThan=u.lt=function(r){return this.cmp(r)<0};f.lessThan=f.lt=function(r,e){return new t(r).lt(e)};u.lessThanOrEqualTo=u.lte=function(r){return this.cmp(r)<=0};f.lessThanOrEqualTo=f.lte=function(r,e){return new t(r).lte(e)};u.equalsTo=u.equal=u.eq=function(r){return this.cmp(r)===0};f.equalsTo=f.equal=f.eq=function(r,e){return new t(r).eq(e)};u.notEqualsTo=u.notEqual=u.neq=function(r){return this.cmp(r)!==0};f.notEqualsTo=f.notEqual=f.neq=function(r,e){return new t(r).neq(e)};u.minimum=u.min=function(r){return this.lt(r)?this.clone():new t(r)};f.minimum=f.min=function(r,e){return new t(r).min(e)};u.maximum=u.max=function(r){return this.gt(r)?this.clone():new t(r)};f.maximum=f.max=function(r,e){return new t(r).max(e)};u.compareTo_tolerance=u.cmp_tolerance=function(r,e){return r instanceof t||(r=new t(r)),this.eq_tolerance(r,e)?0:this.cmp(r)};f.compare_tolerance=f.cmp_tolerance=function(r,e,n){return new t(r).cmp_tolerance(e,n)};u.greaterThan_tolerance=u.gt_tolerance=function(r,e){return r instanceof t||(r=new t(r)),!this.eq_tolerance(r,e)&&this.gt(r)};f.greaterThan_tolerance=f.gt_tolerance=function(r,e,n){return new t(r).gt_tolerance(e,n)};u.greaterThanOrEqualTo_tolerance=u.gte_tolerance=function(r,e){return r instanceof t||(r=new t(r)),this.eq_tolerance(r,e)||this.gt(r)};f.greaterThanOrEqualTo_tolerance=f.gte_tolerance=function(r,e,n){return new t(r).gte_tolerance(e,n)};u.lessThan_tolerance=u.lt_tolerance=function(r,e){return r instanceof t||(r=new t(r)),!this.eq_tolerance(r,e)&&this.lt(r)};f.lessThan_tolerance=f.lt_tolerance=function(r,e,n){return new t(r).lt_tolerance(e,n)};u.lessThanOrEqualTo_tolerance=u.lte_tolerance=function(r,e){return r instanceof t||(r=new t(r)),this.eq_tolerance(r,e)||this.lt(r)};f.lessThanOrEqualTo_tolerance=f.lte_tolerance=function(r,e,n){return new t(r).lte_tolerance(e,n)};u.equalsTo_tolerance=u.equal_tolerance=u.eq_tolerance=function(r,e){if(r instanceof t||(r=new t(r)),e==null&&(e=1e-7),this.isNaN()||r.isNaN()||this.isFinite()!=r.isFinite()||this.sign!=r.sign||Math.abs(this.layer-r.layer)>1)return!1;var n,a;if(this.layer!=r.layer){var i,s;if(this.layer>r.layer?(i=this,s=r):(i=r,s=this),!(i.array.length==2&&i.array[0][0]===0&&i.array[1][0]==1&&i.array[1][1]==1))return!1;n=i.array[0][1],s.array[s.array.length-1][1]>=10?a=Math.log10(s.array[s.array.length-1][0]+1):a=Math.log10(s.array[s.array.length-1][0])}else{if(Math.abs(this.array[this.array.length-1][0]-r.array[r.array.length-1][0])>1)return!1;for(var o=1;Math.max(this.array.length,r.array.length)-o>=0;++o){var l=this.array[this.array.length-o][0],c=r.array[r.array.length-o][0],i,s,E,g;if(l!=c)l>c?(i=this,s=r):(i=r,s=this,l=c),E=i.array[i.array.length-o][1],g=0;else if(i=this,s=r,E=i.array[i.array.length-o][1],g=s.array[s.array.length-o][1],i.array.length-o==0){n=E,a=g;break}if(Math.abs(E-g)>1)return!1;if(E!=g){if(!(i.array.length-o<2||i.array.length-o==2&&i.array[0][0]===0&&i.array[1][0]==1&&i.array[1][1]==1))return!1;n=i.array[0][1],l==1?a=Math.log10(s.operator(0)):l==2&&s.operator(0)>=1e10?a=Math.log10(s.operator(1)+2):s.operator(l-2)>=10?a=Math.log10(s.operator(l-1)+1):a=Math.log10(s.operator(l-1));break}}}return Math.abs(n-a)<=e*Math.max(Math.abs(n),Math.abs(a))};f.equalsTo_tolerance=f.equal_tolerance=f.eq_tolerance=function(r,e,n){return new t(r).eq_tolerance(e,n)};u.notEqualsTo_tolerance=u.notEqual_tolerance=u.neq_tolerance=function(r,e){return!this.eq_tolerance(r,e)};f.notEqualsTo_tolerance=f.notEqual_tolerance=f.neq_tolerance=function(r,e,n){return new t(r).neq_tolerance(e,n)};u.isPositive=u.ispos=function(){return this.gt(t.ZERO)};f.isPositive=f.ispos=function(r){return new t(r).ispos()};u.isNegative=u.isneg=function(){return this.lt(t.ZERO)};f.isNegative=f.isneg=function(r){return new t(r).isneg()};u.isNaN=function(){return isNaN(this.array[0][1])};f.isNaN=function(r){return new t(r).isNaN()};u.isFinite=function(){return isFinite(this.array[0][1])};f.isFinite=function(r){return new t(r).isFinite()};u.isInfinite=function(){return this.array[0][1]==1/0};f.isInfinite=function(r){return new t(r).isInfinite()};u.isInteger=u.isint=function(){return this.sign==-1?this.abs().isint():this.gt(t.MAX_SAFE_INTEGER)?!0:Number.isInteger(this.toNumber())};f.isInteger=f.isint=function(r){return new t(r).isint()};u.floor=function(){return this.isInteger()?this.clone():new t(Math.floor(this.toNumber()))};f.floor=function(r){return new t(r).floor()};u.ceiling=u.ceil=function(){return this.isInteger()?this.clone():new t(Math.ceil(this.toNumber()))};f.ceiling=f.ceil=function(r){return new t(r).ceil()};u.round=function(){return this.isInteger()?this.clone():new t(Math.round(this.toNumber()))};f.round=function(r){return new t(r).round()};var G=!1;u.plus=u.add=function(r){var e=this.clone();if(r=new t(r),t.debug>=t.NORMAL&&(console.log(this+"+"+r),G||(console.warn(O+"Debug output via 'debug' is being deprecated and will be removed in the future!"),G=!0)),e.sign==-1)return e.neg().add(r.neg()).neg();if(r.sign==-1)return e.sub(r.neg());if(e.eq(t.ZERO))return r;if(r.eq(t.ZERO))return e;if(e.isNaN()||r.isNaN()||e.isInfinite()&&r.isInfinite()&&e.eq(r.neg()))return t.NaN.clone();if(e.isInfinite())return e;if(r.isInfinite())return r;var n=e.min(r),a=e.max(r),i=a.operator(0),s=a.operator(1),o;if(a.gt(t.E_MAX_SAFE_INTEGER)||a.div(n).gt(t.MAX_SAFE_INTEGER))o=a;else if(!s)o=new t(e.toNumber()+r.toNumber());else if(s==1){var l=n.operator(1)?n.operator(0):Math.log10(n.operator(0));o=new t([l+Math.log10(Math.pow(10,i-l)+1),1])}return n=a=null,o};f.plus=f.add=function(r,e){return new t(r).add(e)};u.minus=u.sub=function(r){var e=this.clone();if(r=new t(r),t.debug>=t.NORMAL&&console.log(e+"-"+r),e.sign==-1)return e.neg().sub(r.neg()).neg();if(r.sign==-1)return e.add(r.neg());if(e.eq(r))return t.ZERO.clone();if(r.eq(t.ZERO))return e;if(e.isNaN()||r.isNaN()||e.isInfinite()&&r.isInfinite())return t.NaN.clone();if(e.isInfinite())return e;if(r.isInfinite())return r.neg();var n=e.min(r),a=e.max(r),i=r.gt(e),s=a.operator(0),o=a.operator(1),l;if(a.gt(t.E_MAX_SAFE_INTEGER)||a.div(n).gt(t.MAX_SAFE_INTEGER))l=a,l=i?l.neg():l;else if(!o)l=new t(e.toNumber()-r.toNumber());else if(o==1){var c=n.operator(1)?n.operator(0):Math.log10(n.operator(0));l=new t([c+Math.log10(Math.pow(10,s-c)-1),1]),l=i?l.neg():l}return n=a=null,l};f.minus=f.sub=function(r,e){return new t(r).sub(e)};u.times=u.mul=function(r){var e=this.clone();if(r=new t(r),t.debug>=t.NORMAL&&console.log(e+"*"+r),e.sign*r.sign==-1)return e.abs().mul(r.abs()).neg();if(e.sign==-1)return e.abs().mul(r.abs());if(e.isNaN()||r.isNaN()||e.eq(t.ZERO)&&r.isInfinite()||e.isInfinite()&&r.abs().eq(t.ZERO))return t.NaN.clone();if(r.eq(t.ZERO))return t.ZERO.clone();if(r.eq(t.ONE))return e.clone();if(e.isInfinite())return e;if(r.isInfinite())return r;if(e.max(r).gt(t.EE_MAX_SAFE_INTEGER))return e.max(r);var n=e.toNumber()*r.toNumber();return n<=v?new t(n):t.pow(10,e.log10().add(r.log10()))};f.times=f.mul=function(r,e){return new t(r).mul(e)};u.divide=u.div=function(r){var e=this.clone();if(r=new t(r),t.debug>=t.NORMAL&&console.log(e+"/"+r),e.sign*r.sign==-1)return e.abs().div(r.abs()).neg();if(e.sign==-1)return e.abs().div(r.abs());if(e.isNaN()||r.isNaN()||e.isInfinite()&&r.isInfinite()||e.eq(t.ZERO)&&r.eq(t.ZERO))return t.NaN.clone();if(r.eq(t.ZERO))return t.POSITIVE_INFINITY.clone();if(r.eq(t.ONE))return e.clone();if(e.eq(r))return t.ONE.clone();if(e.isInfinite())return e;if(r.isInfinite())return t.ZERO.clone();if(e.max(r).gt(t.EE_MAX_SAFE_INTEGER))return e.gt(r)?e.clone():t.ZERO.clone();var n=e.toNumber()/r.toNumber();if(n<=v)return new t(n);var a=t.pow(10,e.log10().sub(r.log10())),i=a.floor();return a.sub(i).lt(new t(1e-9))?i:a};f.divide=f.div=function(r,e){return new t(r).div(e)};u.reciprocate=u.rec=function(){return t.debug>=t.NORMAL&&console.log(this+"^-1"),this.isNaN()||this.eq(t.ZERO)?t.NaN.clone():this.abs().gt("2e323")?t.ZERO.clone():new t(1/this)};f.reciprocate=f.rec=function(r){return new t(r).rec()};u.modular=u.mod=function(r){return r=new t(r),r.eq(t.ZERO)?t.ZERO.clone():this.sign*r.sign==-1?this.abs().mod(r.abs()).neg():this.sign==-1?this.abs().mod(r.abs()):this.sub(this.div(r).floor().mul(r))};f.modular=f.mod=function(r,e){return new t(r).mod(e)};var K=function(r){if(!isFinite(r))return r;if(r<-50)return r==Math.trunc(r)?Number.NEGATIVE_INFINITY:0;for(var e=1;r<10;)e=e*r,++r;r-=1;var n=.9189385332046727;n+=(r+.5)*Math.log(r),n-=r;var a=r*r,i=r;return n+=1/(12*i),i*=a,n-=1/(360*i),i*=i*a,n+=1/(1260*i),i*=a,n-=1/(1680*i),i*=a,n+=1/(1188*i),i*=a,n-=691/(360360*i),i*=a,n+=7/(1092*i),i*=a,n-=3617/(122400*i),Math.exp(n)/e};u.gamma=function(){var r=this.clone();if(r.gt(t.TETRATED_MAX_SAFE_INTEGER))return r;if(r.gt(t.E_MAX_SAFE_INTEGER))return t.exp(r);if(r.gt(t.MAX_SAFE_INTEGER))return t.exp(t.mul(r,t.ln(r).sub(1)));var e=r.operator(0);if(e>1){if(e<24)return new t(K(r.sign*e));var n=e-1,a=.9189385332046727;a+=(n+.5)*Math.log(n),a-=n;var i=n*n,s=n,o=12*s,l=1/o,c=a+l;if(c==a||(a=c,s*=i,o=360*s,l=1/o,c=a-l,c==a))return t.exp(a);a=c,s*=i,o=1260*s;var E=1/o;return a+=E,s*=i,o=1680*s,E=1/o,a-=E,t.exp(a)}else return this.rec()};f.gamma=function(r){return new t(r).gamma()};f.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];u.factorial=u.fact=function(){var r=this.clone(),e=t.factorials;if(r.lt(t.ZERO)||!r.isint())return r.add(1).gamma();if(r.lte(170))return new t(e[+r]);var n=1;return r.div(t.E).pow(r).mul(r.mul(t.PI).mul(2).sqrt()).times(n)};f.factorial=f.fact=function(r){return new t(r).fact()};u.toPower=u.pow=function(r){if(r=new t(r),t.debug>=t.NORMAL&&console.log(this+"^"+r),r.eq(t.ZERO))return t.ONE.clone();if(r.eq(t.ONE))return this.clone();if(r.lt(t.ZERO))return this.pow(r.neg()).rec();if(this.lt(t.ZERO)&&r.isint())return r.mod(2).lt(t.ONE)?this.abs().pow(r):this.abs().pow(r).neg();if(this.lt(t.ZERO))return t.NaN.clone();if(this.eq(t.ONE))return t.ONE.clone();if(this.eq(t.ZERO))return t.ZERO.clone();if(this.max(r).gt(t.TETRATED_MAX_SAFE_INTEGER))return this.max(r);if(this.eq(10))return r.gt(t.ZERO)?(r.operator(1,r.operator(1)+1||1),r.normalize(),r):new t(Math.pow(10,r.toNumber()));if(r.lt(t.ONE))return this.root(r.rec());var e=Math.pow(this.toNumber(),r.toNumber());return e<=v?new t(e):t.pow(10,this.log10().mul(r))};f.toPower=f.pow=function(r,e){return new t(r).pow(e)};u.exponential=u.exp=function(){return t.pow(Math.E,this)};f.exponential=f.exp=function(r){return t.pow(Math.E,r)};u.squareRoot=u.sqrt=function(){return this.root(2)};f.squareRoot=f.sqrt=function(r){return new t(r).root(2)};u.cubeRoot=u.cbrt=function(){return this.root(3)};f.cubeRoot=f.cbrt=function(r){return new t(r).root(3)};u.root=function(r){return r=new t(r),t.debug>=t.NORMAL&&console.log(this+"root"+r),r.eq(t.ONE)?this.clone():r.lt(t.ZERO)?this.root(r.neg()).rec():r.lt(t.ONE)?this.pow(r.rec()):this.lt(t.ZERO)&&r.isint()&&r.mod(2).eq(t.ONE)?this.neg().root(r).neg():this.lt(t.ZERO)?t.NaN.clone():this.eq(t.ONE)?t.ONE.clone():this.eq(t.ZERO)?t.ZERO.clone():this.max(r).gt(t.TETRATED_MAX_SAFE_INTEGER)?this.gt(r)?this.clone():t.ZERO.clone():t.pow(10,this.log10().div(r))};f.root=function(r,e){return new t(r).root(e)};u.generalLogarithm=u.log10=function(){var r=this.clone();return t.debug>=t.NORMAL&&console.log("log"+this),r.lt(t.ZERO)?t.NaN.clone():r.eq(t.ZERO)?t.NEGATIVE_INFINITY.clone():r.lte(t.MAX_SAFE_INTEGER)?new t(Math.log10(r.toNumber())):!r.isFinite()||r.gt(t.TETRATED_MAX_SAFE_INTEGER)?r:(r.operator(1,r.operator(1)-1),r.normalize())};f.generalLogarithm=f.log10=function(r){return new t(r).log10()};u.logarithm=u.logBase=function(r){return r===void 0&&(r=Math.E),this.log10().div(t.log10(r))};f.logarithm=f.logBase=function(r,e){return new t(r).logBase(e)};u.naturalLogarithm=u.log=u.ln=function(){return this.logBase(Math.E)};f.naturalLogarithm=f.log=f.ln=function(r){return new t(r).ln()};var P=.5671432904097838,B=function(r,e,n){e===void 0&&(e=1e-10),n===void 0&&(n=!0);var a;if(!Number.isFinite(r))return r;if(n){if(r===0)return r;if(r===1)return P;r<10?a=0:a=Math.log(r)-Math.log(Math.log(r))}else{if(r===0)return-1/0;r<=-.1?a=-2:a=Math.log(-r)-Math.log(-Math.log(-r))}for(var i=0;i<100;++i){var s=(r*Math.exp(-a)+a*a)/(a+1);if(Math.abs(s-a)<e*Math.abs(s))return s;a=s}throw Error("Iteration failed to converge: "+r)},L=function(r,e,n){e===void 0&&(e=1e-10),n===void 0&&(n=!0),r=new t(r);var a;if(!r.isFinite())return r;if(n){if(r.eq(t.ZERO))return r;if(r.eq(t.ONE))return new t(P);a=t.ln(r)}else{if(r.eq(t.ZERO))return t.NEGATIVE_INFINITY.clone();a=t.ln(r.neg())}for(var i=0;i<100;++i){var s=a.neg().exp(),o=a.sub(r.mul(s)),l=a.add(t.ONE).sub(a.add(2).mul(o).div(t.mul(2,a).add(2)));if(l.eq(t.ZERO))return a;var c=a.sub(o.div(l));if(t.abs(c.sub(a)).lt(t.abs(c).mul(e)))return c;a=c}throw Error("Iteration failed to converge: "+r)};u.lambertw=function(r){r===void 0&&(r=!0);var e=this.clone();return e.isNaN()?e:e.lt(-.3678794411710499)?t.NaN.clone():r?e.gt(t.TETRATED_MAX_SAFE_INTEGER)?e:e.gt(t.EE_MAX_SAFE_INTEGER)?(e.operator(1,e.operator(1)-1),e):e.gt(t.MAX_SAFE_INTEGER)?L(e):new t(B(e.sign*e.operator(0))):e.ispos()?t.NaN.clone():e.abs().gt(t.EE_MAX_SAFE_INTEGER)?e.neg().recip().lambertw().neg():e.abs().gt(t.MAX_SAFE_INTEGER)?L(e,1e-10,!1):new t(B(e.sign*e.operator(0),1e-10,!1))};f.lambertw=function(r,e){return new t(r).lambertw(e)};u.tetrate=u.tetr=function(r,e){e===void 0&&(e=t.ONE);var n=this.clone();r=new t(r),e=new t(e),e.neq(t.ONE)&&(r=r.add(e.slog(n))),t.debug>=t.NORMAL&&console.log(n+"^^"+r);var a;if(n.isNaN()||r.isNaN()||e.isNaN())return t.NaN.clone();if(r.isInfinite()&&r.sign>0)return n.gte(Math.exp(1/Math.E))?t.POSITIVE_INFINITY.clone():(a=n.ln().neg(),a.lambertw().div(a));if(r.lte(-2))return t.NaN.clone();if(n.eq(t.ZERO))return r.eq(t.ZERO)?t.NaN.clone():r.mod(2).eq(t.ZERO)?t.ZERO.clone():t.ONE.clone();if(n.eq(t.ONE))return r.eq(t.ONE.neg())?t.NaN.clone():t.ONE.clone();if(r.eq(t.ONE.neg()))return t.ZERO.clone();if(r.eq(t.ZERO))return t.ONE.clone();if(r.eq(t.ONE))return n;if(r.eq(2))return n.pow(n);if(n.eq(2)){if(r.eq(3))return new t(16);if(r.eq(4))return new t(65536)}var i=n.max(r);if(i.gt("10^^^"+v))return i;if(i.gt(t.TETRATED_MAX_SAFE_INTEGER)||r.gt(t.MAX_SAFE_INTEGER)){if(this.lt(Math.exp(1/Math.E)))return a=n.ln().neg(),a.lambertw().div(a);var s=n.slog(10).add(r);return s.operator(2,(s.operator(2)||0)+1),s.normalize(),s}for(var o=r.toNumber(),l=Math.floor(o),c=n.pow(o-l),E=t.NaN,g=0,h=new t(t.E_MAX_SAFE_INTEGER);l!==0&&c.lt(h)&&g<100;++g)if(l>0){if(c=n.pow(c),E.eq(c)){l=0;break}E=c,--l}else{if(c=c.logBase(n),E.eq(c)){l=0;break}E=c,++l}return(g==100||this.lt(Math.exp(1/Math.E)))&&(l=0),c.operator(1,c.operator(1)+l||l),c.normalize(),c};f.tetrate=f.tetr=function(r,e,n){return new t(r).tetr(e,n)};u.iteratedexp=function(r,e){return this.tetr(r,e)};f.iteratedexp=function(r,e,n){return new t(r).iteratedexp(e,n)};u.iteratedlog=function(r,e){r===void 0&&(r=10),e===void 0&&(e=t.ONE.clone());var n=this.clone();return r=new t(r),e=new t(e),e.eq(t.ZERO)?n:e.eq(t.ONE)?n.logBase(r):r.tetr(n.slog(r).sub(e))};f.iteratedlog=function(r,e,n){return new t(r).iteratedlog(e,n)};u.layeradd=function(r,e){e===void 0&&(e=10),r===void 0&&(r=t.ONE.clone());var n=this.clone();return e=new t(e),r=new t(r),e.tetr(n.slog(e).add(r))};f.layeradd=function(r,e,n){return new t(r).layeradd(e,n)};u.layeradd10=function(r){return this.layeradd(r)};f.layeradd10=function(r,e){return new t(r).layeradd10(e)};u.ssqrt=u.ssrt=function(){var r=this.clone();if(r.lt(Math.exp(-1/Math.E)))return t.NaN.clone();if(!r.isFinite()||r.gt(t.TETRATED_MAX_SAFE_INTEGER))return r;if(r.gt(t.EE_MAX_SAFE_INTEGER))return r.operator(1,r.operator(1)-1),r;var e=r.ln();return e.div(e.lambertw())};f.ssqrt=f.ssrt=function(r){return new t(r).ssqrt()};u.slog=function(r){r===void 0&&(r=10);var e=new t(this);if(r=new t(r),e.isNaN()||r.isNaN()||e.isInfinite()&&r.isInfinite())return t.NaN.clone();if(e.isInfinite())return e;if(r.isInfinite())return t.ZERO.clone();if(e.lt(t.ZERO))return t.ONE.neg();if(e.eq(t.ONE))return t.ZERO.clone();if(e.eq(r))return t.ONE.clone();if(r.lt(Math.exp(1/Math.E))){var n=t.tetr(r,1/0);if(e.eq(n))return t.POSITIVE_INFINITY.clone();if(e.gt(n))return t.NaN.clone()}if(e.max(r).gt("10^^^"+v))return e.gt(r)?e:t.ZERO.clone();if(e.max(r).gt(t.TETRATED_MAX_SAFE_INTEGER))return e.gt(r)?(e.operator(2,e.operator(2)-1),e.normalize(),e.sub(e.operator(1))):t.ZERO.clone();var a=0,i=(e.operator(1)||0)-(r.operator(1)||0);if(i>3){var s=i-3;a+=s,e.operator(1,e.operator(1)-s)}for(var o=0;o<100;++o)if(e.lt(t.ZERO))e=t.pow(r,e),--a;else{if(e.lte(1))return new t(a+e.toNumber()-1);++a,e=t.logBase(e,r)}if(e.gt(10))return new t(a)};f.slog=function(r,e){return new t(r).slog(e)};u.pentate=u.pent=function(r){return this.arrow(3)(r)};f.pentate=f.pent=function(r,e){return t.arrow(r,3,e)};u.arrow=function(r){var e=this.clone();return r=new t(r),!r.isint()||r.lt(t.ZERO)?function(n){return t.NaN.clone()}:r.eq(t.ZERO)?function(n){return e.mul(n)}:r.eq(t.ONE)?function(n){return e.pow(n)}:r.eq(2)?function(n){return e.tetr(n)}:function(n){var a;arguments.length==2?a=arguments[1]:a=0,n=new t(n);var i;if(t.debug>=t.NORMAL&&console.log(e+"{"+r+"}"+n),e.isNaN()||n.isNaN()||n.lt(t.ZERO))return t.NaN.clone();if(e.eq(t.ZERO))return n.eq(t.ONE)?t.ZERO.clone():t.NaN.clone();if(e.eq(t.ONE)||n.eq(t.ZERO))return t.ONE.clone();if(n.eq(t.ONE))return e.clone();if(r.gt(t.MAX_SAFE_INTEGER))return i=r.clone(),i.layer++,i;var s=r.toNumber();if(n.eq(2))return e.arrow(s-1)(e,a+1);if(e.max(n).gt("10{"+(s+1)+"}"+v))return e.max(n);if(e.gt("10{"+s+"}"+v)||n.gt(t.MAX_SAFE_INTEGER)){e.gt("10{"+s+"}"+v)?(i=e.clone(),i.operator(s,i.operator(s)-1),i.normalize()):e.gt("10{"+(s-1)+"}"+v)?i=new t(e.operator(s-1)):i=t.ZERO;var o=i.add(n);return o.operator(s,(o.operator(s)||0)+1),o.normalize(),o}if(a>=t.maxOps+10)return new t([[0,10],[s,1]]);var l=n.toNumber(),c=Math.floor(l),E=r.sub(t.ONE);i=e.arrow(E)(l-c,a+1);for(var g=0,h=new t("10{"+(s-1)+"}"+v);c!==0&&i.lt(h)&&g<100;++g)c>0&&(i=e.arrow(E)(i,a+1),--c);return g==100&&(c=0),i.operator(s-1,i.operator(s-1)+c||c),i.normalize(),i}};u.chain=function(r,e){return this.arrow(e)(r)};f.arrow=function(r,e,n){return new t(r).arrow(e)(n)};f.chain=function(r,e,n){return new t(r).arrow(n)(e)};f.hyper=function(r){return r=new t(r),r.eq(t.ZERO)?function(e,n){return new t(n).eq(t.ZERO)?new t(e):new t(e).add(t.ONE)}:r.eq(t.ONE)?function(e,n){return t.add(e,n)}:function(e,n){return new t(e).arrow(r.sub(2))(n)}};u.expansion=function(r){var e=this.clone();r=new t(r);var n;if(t.debug>=t.NORMAL&&console.log("{"+e+","+r+",1,2}"),r.lte(t.ZERO)||!r.isint())return t.NaN.clone();if(r.eq(t.ONE))return e.clone();if(!e.isint())return t.NaN.clone();if(e.eq(2))return new t(4);if(r.gt(t.MAX_SAFE_INTEGER))return t.POSITIVE_INFINITY.clone();var a=r.toNumber()-1;n=e;for(var i=0;a!==0&&n.lt(t.MAX_SAFE_INTEGER)&&i<100;++i)a>0&&(n=e.arrow(n)(e),--a);return i==100&&(a=0),n.layer+=a,n.normalize(),n};f.expansion=function(r,e){return new t(r).expansion(e)};f.affordGeometricSeries=function(r,e,n,a){r=new t(r),e=new t(e),n=new t(n);var i=e.mul(n.pow(a));return t.floor(r.div(i).mul(n.sub(t.ONE)).add(t.ONE).log10().div(n.log10()))};f.affordArithmeticSeries=function(r,e,n,a){r=new t(r),e=new t(e),n=new t(n),a=new t(a);var i=e.add(a.mul(n)),s=i.sub(n.div(2)),o=s.pow(2);return s.neg().add(o.add(n.mul(r).mul(2)).sqrt()).div(n).floor()};f.sumGeometricSeries=function(r,e,n,a){return e=new t(e),n=new t(n),e.mul(n.pow(a)).mul(t.sub(t.ONE,n.pow(r))).div(t.sub(t.ONE,n))};f.sumArithmeticSeries=function(r,e,n,a){r=new t(r),e=new t(e),a=new t(a);var i=e.add(a.mul(n));return r.div(2).mul(i.mul(2).plus(r.sub(t.ONE).mul(n)))};f.choose=function(r,e){return new t(r).factorial().div(new t(e).factorial().mul(new t(r).sub(new t(e)).factorial()))};u.choose=function(r){return t.choose(this,r)};u.normalize=function(){var r,e=this;if(t.debug>=t.ALL&&console.log(e.toString()),(!e.array||!e.array.length)&&(e.array=[[0,0]]),e.sign!=1&&e.sign!=-1&&(typeof e.sign!="number"&&(e.sign=Number(e.sign)),e.sign=e.sign<0?-1:1),e.layer>v)return e.array=[[0,1/0]],e.layer=0,e;Number.isInteger(e.layer)&&(e.layer=Math.floor(e.layer));for(var n=0;n<e.array.length;++n){var a=e.array[n];if((a[0]===null||a[0]===void 0)&&(a[0]=0),a[0]!==0&&(a[1]===0||a[1]===null||a[1]===void 0)){e.array.splice(n,1),--n;continue}if(isNaN(a[0])||isNaN(a[1]))return e.array=[[0,NaN]],e;if(!isFinite(a[0])||!isFinite(a[1]))return e.array=[[0,1/0]],e;Number.isInteger(a[0])||(a[0]=Math.floor(a[0])),a[0]!==0&&!Number.isInteger(a[1])&&(a[1]=Math.floor(a[1]))}do{for(t.debug>=t.ALL&&console.log(e.toString()),r=!1,e.array.sort(function(i,s){return i[0]>s[0]?1:i[0]<s[0]?-1:0}),e.array.length>t.maxOps&&e.array.splice(0,e.array.length-t.maxOps),e.array.length||(e.array=[[0,0]]),e.array[e.array.length-1][0]>v?(e.layer++,e.array=[[0,e.array[e.array.length-1][0]]],r=!0):e.layer&&e.array.length==1&&e.array[0][0]===0&&(e.layer--,e.array[0][1]===0?e.array=[[0,10]]:e.array=[[0,10],[Math.round(e.array[0][1]),1]],r=!0),e.array.length<t.maxOps&&e.array[0][0]!==0&&e.array.unshift([0,10]),n=0;n<e.array.length-1;++n)e.array[n][0]==e.array[n+1][0]&&(e.array[n][1]+=e.array[n+1][1],e.array.splice(n+1,1),--n,r=!0);for(e.array[0][0]===0&&e.array[0][1]>v&&(e.array.length>=2&&e.array[1][0]==1?e.array[1][1]++:e.array.splice(1,0,[1,1]),e.array[0][1]=Math.log10(e.array[0][1]),r=!0);e.array.length>=2&&e.array[0][0]===0&&e.array[0][1]<A&&e.array[1][0]==1&&e.array[1][1];)e.array[0][1]=Math.pow(10,e.array[0][1]),e.array[1][1]>1?e.array[1][1]--:e.array.splice(1,1),r=!0;for(;e.array.length>=2&&e.array[0][0]===0&&e.array[0][1]==1&&e.array[1][1];)e.array[1][1]>1?e.array[1][1]--:e.array.splice(1,1),e.array[0][1]=10;for(e.array.length>=2&&e.array[0][0]===0&&e.array[1][0]!=1&&(e.array[0][1]&&e.array.splice(1,0,[e.array[1][0]-1,e.array[0][1]]),e.array[0][1]=1,e.array[2][1]>1?e.array[2][1]--:e.array.splice(2,1),r=!0),n=1;n<e.array.length;++n)e.array[n][1]>v&&(n!=e.array.length-1&&e.array[n+1][0]==e.array[n][0]+1?e.array[n+1][1]++:e.array.splice(n+1,0,[e.array[n][0]+1,1]),e.array[0][0]===0?e.array[0][1]=e.array[n][1]+1:e.array.splice(0,0,[0,e.array[n][1]+1]),e.array.splice(1,n),r=!0)}while(r);return e.array.length||(e.array=[[0,0]]),e};var X=!1;u.standardize=function(){return X||(console.warn(O+"'standardize' method is being deprecated in favor of 'normalize' and will be removed in the future!"),X=!0),this.normalize()};u.toNumber=function(){return this.sign==-1?-1*this.abs():this.array.length>=2&&(this.array[1][0]>=2||this.array[1][1]>=2||this.array[1][1]==1&&this.array[0][1]>Math.log10(Number.MAX_VALUE))?1/0:this.array.length>=2&&this.array[1][1]==1?Math.pow(10,this.array[0][1]):this.array[0][1]};u.toString=function(){if(this.sign==-1)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var r="";if(this.layer?this.layer<3?r+="J".repeat(this.layer):r+="J^"+this.layer+" ":r+="",this.array.length>=3||this.array.length==2&&this.array[1][0]>=2)for(var e=this.array.length-1;e>=2;--e){var n=this.array[e],a=n[0]>=5?"{"+n[0]+"}":"^".repeat(n[0]);n[1]>1?r+="(10"+a+")^"+n[1]+" ":n[1]==1&&(r+="10"+a)}var i=this.operator(0),s=this.operator(1);return s?s<3?r+="e".repeat(s-1)+Math.pow(10,i-Math.floor(i))+"e"+Math.floor(i):s<8?r+="e".repeat(s)+i:r+="(10^)^"+s+" "+i:r+=String(i),r};var I=function(e,n){var a=n+1,i=Math.ceil(Math.log10(Math.abs(e)));i<100&&(i=0);var s=Math.round(e*Math.pow(10,a-i))*Math.pow(10,i-a);return parseFloat(s.toFixed(Math.max(a-i,0)))};u.toStringWithDecimalPlaces=function(r,e){if(this.sign==-1)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var n=0,a="",i=Math.pow(10,r);if(this.layer?this.layer<3?a+="J".repeat(this.layer):a+="J^"+this.layer+" ":a+="",this.array.length>=3||this.array.length==2&&this.array[1][0]>=2)for(var s=this.array.length-1;!n&&s>=2;--s){var o=this.array[s],l=o[0],c=o[1];e&&c>=i?(++l,n=c,c=1):e&&this.array[s-1][0]==l-1&&this.array[s-1][1]>=i&&(++c,n=this.array[s-1][1]);var E=l>=5?"{"+l+"}":"^".repeat(l);c>1?a+="(10"+E+")^"+c+" ":c==1&&(a+="10"+E)}var g=this.operator(0),h=this.operator(1);return g>i&&(g=Math.log10(g),++h),n?a+=I(n,r):h?h<3?a+="e".repeat(h-1)+I(Math.pow(10,g-Math.floor(g)),r)+"e"+I(Math.floor(g),r):h<8?a+="e".repeat(h)+I(g,r):e?a+="(10^)^"+I(h,r)+" "+I(g,r):a+="(10^)^"+h+" "+I(g,r):a+=String(I(g,r)),a};u.toExponential=function(r,e){return this.array.length==1?(this.sign*this.array[0][1]).toExponential(r):this.toStringWithDecimalPlaces(r,e)};u.toFixed=function(r,e){return this.array.length==1?(this.sign*this.array[0][1]).toFixed(r):this.toStringWithDecimalPlaces(r,e)};u.toPrecision=function(r,e){return this.array[0][1]===0?(this.sign*this.array[0][1]).toFixed(r-1,e):this.array.length==1&&this.array[0][1]<1e-6?this.toExponential(r-1,e):this.array.length==1&&r>Math.log10(this.array[0][1])?this.toFixed(r-Math.floor(Math.log10(this.array[0][1]))-1,e):this.toExponential(r-1,e)};u.valueOf=function(){return this.toString()};u.toJSON=function(){if(t.serializeMode==t.JSON){for(var r=[],e=0;e<this.array.length;++e)r.push([this.array[e][0],this.array[e][1]]);return{array:r,layer:this.layer,sign:this.sign}}else if(t.serializeMode==t.STRING)return this.toString()};u.toHyperE=function(){if(this.layer)throw Error(O+"Sorry, but this prototype doesn't support correct Hyper-E notation for numbers larger than 10{MSI}10");if(this.sign==-1)return"-"+this.abs().toHyperE();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";if(this.lt(t.MAX_SAFE_INTEGER))return String(this.array[0][1]);if(this.lt(t.E_MAX_SAFE_INTEGER))return"E"+this.array[0][1];for(var r="E"+this.operator(0)+"#"+this.operator(1),e=1,n=Math.ceil(this.getOperatorIndex(2));n<this.array.length;++n)e+1<this.array[n][0]&&(r+="#1".repeat(this.array[n][0]-e-1)),e=this.array[n][0],r+="#"+(this.array[n][1]+1);return this.layer?this.layer<3?r="J".repeat(this.layer)+r:r="J^"+this.layer+" "+r:r=""+r,r};f.fromNumber=function(r){if(typeof r!="number")throw Error(w+"Expected Number");var e=new t;return e.array[0][1]=Math.abs(r),e.sign=r<0?-1:1,e.normalize(),e};var C=function(e){for(var n=BigInt(64);e>=BigInt(1)<<n;)n*=BigInt(2);for(var a=n/BigInt(2);a>BigInt(0);)e>=BigInt(1)<<n?n+=a:n-=a,a/=BigInt(2);var i=n-BigInt(54),s=e>>i;return Math.log10(Number(s))+Math.LOG10E/Math.LOG2E*Number(i)};f.fromBigInt=function(r){if(typeof r!="bigint")throw Error(w+"Expected BigInt");var e=new t,n=r<BigInt(0)?-r:r;return e.sign=r<BigInt(0)?-1:1,n<=v?e.array[0][1]=Number(n):e.array=[[0,C(n)],[1,1]],e.normalize(),e};var q=17,k=function(e){return Math.log10(Number(e.substring(0,q)))+(e.length-q)};f.fromString=function(r){if(typeof r!="string")throw Error(w+"Expected String");var e=!1;if(typeof r=="string"&&(r[0]=="["||r[0]=="{"))try{JSON.parse(r)}finally{e=!0}if(e)return t.fromJSON(r);var n=new t;if(n.array=[[0,0]],!$.test(r))return console.warn(O+"Malformed input: "+r),n.array=[[0,NaN]],n;var a=!1;if(r[0]=="-"||r[0]=="+"){var i=r.search(/[^-\+]/),s=r.substring(0,i);a=s.match(/-/g).length%2==1,r=r.substring(i)}if(r=="NaN")n.array=[[0,NaN]];else if(r=="Infinity")n.array=[[0,1/0]];else{var o,l,c,E,g;for(r[0]=="J"&&(r[1]=="^"?(o=r.substring(2).search(/[^0-9]/)+2,n.layer=Number(r.substring(2,o)),r=r.substring(o+1)):(o=r.search(/[^J]/),n.layer=o,r=r.substring(o)));r&&/^\(?10[\^\{]/.test(r);){r[0]=="("&&(r=r.substring(1));var h;r[2]=="^"?(o=r.substring(2).search(/[^\^]/),h=o,l=o+2):(o=r.indexOf("}"),h=Number(r.substring(3,o)),l=o+1),r=r.substring(l),r[0]==")"?(o=r.indexOf(" "),c=Number(r.substring(2,o)),r=r.substring(o+1)):c=1,h==1?n.array.length>=2&&n.array[1][0]==1?n.array[1][1]+=c:n.array.splice(1,0,[1,c]):h==2?(o=n.array.length>=2&&n.array[1][0]==1?n.array[1][1]:0,l=n.array[0][1],l>=1e10&&++o,l>=10&&++o,n.array[0][1]=o,n.array.length>=2&&n.array[1][0]==1&&n.array.splice(1,1),E=n.getOperatorIndex(2),Number.isInteger(E)?n.array[E][1]+=c:n.array.splice(Math.ceil(E),0,[2,c])):(o=n.operator(h-1),l=n.operator(h-2),l>=10&&++o,E=n.getOperatorIndex(h),n.array.splice(1,Math.ceil(E)-1),n.array[0][1]=o,Number.isInteger(E)?n.array[1][1]+=c:n.array.splice(1,0,[h,c]))}for(o=r.split(/[Ee]/),l=[n.array[0][1],0],c=1,g=o.length-1;g>=0;--g){l[0]<A&&l[1]===0?l[0]=Math.pow(10,c*l[0]):c==-1?(l[1]===0?l[0]=Math.pow(10,c*l[0]):l[1]==1&&l[0]<=Math.log10(Number.MAX_VALUE)?l[0]=Math.pow(10,c*Math.pow(10,l[0])):l[0]=0,l[1]=0):l[1]++;var M=o[g].indexOf("."),b=M==-1?o[g].length:M;l[1]===0?b>=q?(l[0]=Math.log10(l[0])+k(o[g].substring(0,b)),l[1]=1):o[g]&&(l[0]*=Number(o[g])):(E=b>=q?k(o[g].substring(0,b)):o[g]?Math.log10(Number(o[g])):0,l[1]==1?l[0]+=E:l[1]==2&&l[0]<A+Math.log10(E)&&(l[0]+=Math.log10(1+Math.pow(10,Math.log10(E)-l[0])))),l[0]<A&&l[1]?(l[0]=Math.pow(10,l[0]),l[1]--):l[0]>v&&(l[0]=Math.log10(l[0]),l[1]++)}n.array[0][1]=l[0],l[1]&&(n.array.length>=2&&n.array[1][0]==1?n.array[1][1]+=l[1]:n.array.splice(1,0,[1,l[1]]))}return a&&(n.sign*=-1),n.normalize(),n};f.fromArray=function(r,e,n){var a,i;if(r instanceof Array&&(e===void 0||typeof e=="number")&&(n===void 0||typeof n=="number"))a=r,i=e;else if(typeof r=="number"&&e instanceof Array&&(n===void 0||typeof n=="number"))a=e,i=r;else if(typeof r=="number"&&typeof e=="number"&&n instanceof Array)a=n,i=r;else throw Error(w+"Expected an Array [and 1 or 2 Number]");var s=new t,o;if(!a.length)s.array=[[0,0]];else if(typeof a[0]=="number")for(s.array=[],o=0;o<a.length;o++){if(typeof a[o]!="number")throw Error(w+"Expected Array of Number");s.array.push([o,a[o]])}else if(a[0]instanceof Array)for(s.array=[],o=0;o<a.length;o++){if(!(a[o]instanceof Array)||typeof a[o][0]!="number"||typeof a[o][1]!="number")throw Error(w+"Expected Array of pair of Number");s.array.push([a[o][0],a[o][1]])}else throw Error(w+"Expected Array of Number or Array of pair of Number");return i?s.sign=Number(i):s.sign=1,s.normalize(),s};f.fromObject=function(r){if(typeof r!="object")throw Error(w+"Expected Object");if(r===null)return t.ZERO.clone();if(r instanceof Array)return t.fromArray(r);if(r instanceof t)return new t(r);if(!(r.array instanceof Array))throw Error(w+"Expected that property 'array' exists");if(r.sign!==void 0&&typeof r.sign!="number")throw Error(w+"Expected that property 'sign' is Number");if(r.layer!==void 0&&typeof r.layer!="number")throw Error(w+"Expected that property 'layer' is Number");return t.fromArray(r.array,r.sign,r.layer)};f.fromJSON=function(r){if(typeof r=="object")return t.fromObject(e);if(typeof r!="string")throw Error(w+"Expected String");var e,n;try{e=JSON.parse(r)}catch(a){throw e=null,a}finally{n=t.fromObject(e)}return e=null,n};f.fromHyperE=function(r){if(typeof r!="string")throw Error(w+"Expected String");var e=new t;if(e.array=[[0,0]],!/^[-\+]*(0|[1-9]\d*(\.\d*)?|Infinity|NaN|E[1-9]\d*(\.\d*)?(#[1-9]\d*)*)$/.test(r))return console.warn(O+"Malformed input: "+r),e.array=[[0,NaN]],e;var n=!1;if(r[0]=="-"||r[0]=="+"){var a=r.search(/[^-\+]/),i=r.substring(0,a);n=i.match(/-/g).length%2===0,r=r.substring(a)}if(r=="NaN")e.array=[[0,NaN]];else if(r=="Infinity")e.array=[[0,1/0]];else if(r[0]!="E")e.array[0][1]=Number(r);else if(r.indexOf("#")==-1)e.array[0][1]=Number(r.substring(1)),e.array[1]=[1,1];else for(var s=r.substring(1).split("#"),o=0;o<s.length;++o){var l=Number(s[o]);o>=2&&--l,e.array[o]=[o,l]}return n&&(e.sign*=-1),e.normalize(),e};u.getOperatorIndex=function(r){if(typeof r!="number"&&(r=Number(r)),!isFinite(r))throw Error(w+"Index out of range.");var e=this.array,n=0,a=e.length-1;if(e[a][0]<r)return a+.5;if(e[n][0]>r)return-.5;for(;n!=a;){if(e[n][0]==r)return n;if(e[a][0]==r)return a;var i=Math.floor((n+a)/2);if(n==i||e[i][0]==r){n=i;break}e[i][0]<r&&(n=i),e[i][0]>r&&(a=i)}return e[n][0]==r?n:n+.5};u.getOperator=function(r){if(typeof r!="number"&&(r=Number(r)),!isFinite(r))throw Error(w+"Index out of range.");var e=this.getOperatorIndex(r);return Number.isInteger(e)?this.array[e][1]:r===0?10:0};u.setOperator=function(r,e){if(typeof r!="number"&&(r=Number(r)),!isFinite(r))throw Error(w+"Index out of range.");var n=this.getOperatorIndex(r);Number.isInteger(n)?this.array[n][1]=e:(n=Math.ceil(n),this.array.splice(n,0,[r,e])),this.normalize()};u.operator=function(r,e){if(e===void 0)return this.getOperator(r);this.setOperator(r,e)};u.clone=function(){for(var r=new t,e=[],n=0;n<this.array.length;++n)e.push([this.array[n][0],this.array[n][1]]);return r.array=e,r.sign=this.sign,r.layer=this.layer,r};function J(r){var e,n,a;function i(o,l){var c=this;if(!(c instanceof i))return new i(o,l);c.constructor=i;var E=null;if(typeof o=="string"&&(o[0]=="["||o[0]=="{"))try{E=JSON.parse(o)}catch{}var g,h,M;if(typeof o=="number"&&!(l instanceof Array))g=i.fromNumber(o);else if(typeof o=="bigint")g=i.fromBigInt(o);else if(E)g=i.fromObject(E);else if(typeof o=="string"&&o[0]=="E")g=i.fromHyperE(o);else if(typeof o=="string")g=i.fromString(o);else if(o instanceof Array||l instanceof Array)g=i.fromArray(o,l);else if(o instanceof i){g=[];for(var b=0;b<o.array.length;++b)g.push([o.array[b][0],o.array[b][1]]);h=o.sign,M=o.layer}else typeof o=="object"?g=i.fromObject(o):(g=[[0,NaN]],h=1,M=0);return typeof h>"u"?(c.array=g.array,c.sign=g.sign,c.layer=g.layer):(c.array=g,c.sign=h,c.layer=M),c}i.prototype=u,i.JSON=0,i.STRING=1,i.NONE=0,i.NORMAL=1,i.ALL=2,i.clone=J,i.config=i.set=U;for(var s in f)f.hasOwnProperty(s)&&(i[s]=f[s]);if(r===void 0&&(r={}),r)for(a=["maxOps","serializeMode","debug"],e=0;e<a.length;)r.hasOwnProperty(n=a[e++])||(r[n]=this[n]);return i.config(r),i}function Q(r){for(var e in m)m.hasOwnProperty(e)&&(Object.defineProperty?Object.defineProperty(r,e,{configurable:!1,enumerable:!0,writable:!1,value:new t(m[e])}):r[e]=new t(m[e]));return r}function U(r){if(!r||typeof r!="object")throw Error(O+"Object expected");var e,n,a,i=["maxOps",1,Number.MAX_SAFE_INTEGER,"serializeMode",0,1,"debug",0,2];for(e=0;e<i.length;e+=3)if((a=r[n=i[e]])!==void 0)if(Math.floor(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(w+n+": "+a);return this}t=J(t);const N=Q(t);N.default=N.ExpantaNum=N;typeof define=="function"&&define.amd?define(function(){return t}):typeof R<"u"&&R.exports&&(R.exports=t);const y={alphaone:new N("1"),alphatwo:new N("0.00000000001"),upgradesBought:{convertaone:new N("0"),upaonemult:new N("0"),upaonepower:new N("0"),autoclick:new N("0"),upconversion:new N("0")},doubleaonemult:new N("2"),autoclickKey:0,autoclickFlag:!1},S="exponentialtower_savefile";function V(r,e){for(const n in e){const a=e[n];if(typeof a=="object"&&a!==null){const i=r[n];n in r||(r[n]=Array.isArray(a)?[]:{}),typeof i=="object"&&i!==null&&V(i,a)}else r[n]=a}}function W(){localStorage.setItem(S,JSON.stringify(y))}function j(){const r=localStorage.getItem(S);if(r===null)return;const e=JSON.parse(r);V(y,e);for(const n in y)typeof y[n]=="string"&&(y[n]=new N(y[n]));for(const n in y.upgradesBought)typeof y.upgradesBought[n]=="string"&&(y.upgradesBought[n]=new N(y.upgradesBought[n]))}function z(){localStorage.removeItem(S)}function H(r){return y.upgradesBought[r]}const D=new Map;function p(r){const e=D.get(r);if(e!==void 0)return e;const n=document.getElementById(r);if(n===null)throw new Error(`Element ${r} is null.`);return D.set(r,n),n}function _(r){return r.toStringWithDecimalPlaces(3)}const d={convertaone:{buttonDiv:"convertaone",costDiv:"convertaonecost",cost:new N("1e15"),costType:"div",costFormula:()=>{const r=N.pow(1e15,N.div(1,y.upgradesBought.upconversion.div(10).plus(1)));d.convertaone.cost=N.pow(r,y.upgradesBought.convertaone.plus(1))},currency:"alphaone",upgrFunction:()=>{y.alphatwo=y.alphatwo.plus(1)}},upaonemult:{buttonDiv:"upaonemult",costDiv:"upaonemultcost",cost:new N("1"),costType:"sub",costFormula:()=>{d.upaonemult.cost=y.upgradesBought.upaonemult.plus(1)},currency:"alphatwo",upgrFunction:()=>{y.doubleaonemult=y.doubleaonemult.plus(1)}},upaonepower:{buttonDiv:"upaonepower",costDiv:"upaonepowercost",cost:new N("1"),costType:"sub",costFormula:()=>{d.upaonepower.cost=y.upgradesBought.upaonepower.plus(1)},currency:"alphatwo",upgrFunction:()=>{y.doubleaonemult=y.doubleaonemult.pow(1.1)}},autoclick:{buttonDiv:"autoclick",costDiv:"autoclickcost",cost:new N("1e50"),costType:"sub",costFormula:()=>{d.autoclick.cost=N.pow(1e50,y.upgradesBought.autoclick.plus(1)),y.upgradesBought.autoclick.gt(25)&&(d.autoclick.cost=new N("Infinity"))},currency:"alphaone",upgrFunction:()=>{y.upgradesBought.autoclick.lte(25)&&(y.autoclickKey=1e3/y.upgradesBought.autoclick.toNumber()),y.autoclickFlag=!0}},upconversion:{buttonDiv:"upconversion",costDiv:"upconversioncost",cost:new N("22"),costType:"sub",costFormula:()=>{d.upconversion.cost=N.pow(3,y.upgradesBought.upconversion).times(22)},currency:"alphatwo",upgrFunction:()=>{d.convertaone.costFormula()}}};function x(r,e,n,a="sub"){let i="",s="Cost:";switch(n){case"alphaone":i="α<sub>1</sub>";break;case"alphatwo":i="α<sub>2</sub>";break}a==="div"&&(s="DivCost:"),p(r).innerHTML=`${s} ${_(e)} ${i}`}const rr=(r,e)=>Object.keys(r).find(n=>r[n]===e);function T(r){if(y[r.currency].gte(r.cost)){r.costType==="sub"?y[r.currency]=y[r.currency].minus(r.cost):y[r.currency]=y[r.currency].div(r.cost);const e=rr(d,r);y.upgradesBought[e]=y.upgradesBought[e].plus(1),r.costFormula(),r.upgrFunction(),r.costType==="sub"?x(r.costDiv,r.cost,r.currency,"sub"):x(r.costDiv,r.cost,r.currency,"div")}}function er(){for(const r in d){const e=d[r];e.costFormula(),e.costType==="sub"?x(e.costDiv,e.cost,e.currency,"sub"):x(e.costDiv,e.cost,e.currency,"div")}}p("convertaone").onclick=()=>{T(d.convertaone)};p("upaonemult").onclick=()=>{T(d.upaonemult)};p("upaonepower").onclick=()=>{T(d.upaonepower)};p("autoclick").onclick=()=>{T(d.autoclick)};p("upconversion").onclick=()=>{T(d.upconversion)};j();er();function tr(){window.scrollTo(0,document.body.scrollHeight)}window.onload=tr;function Z(){y.alphaone=y.alphaone.times(y.doubleaonemult)}p("doubleaone").onclick=()=>{Z()};let F;H("autoclick").gt(0)&&(clearInterval(F),F=setInterval(()=>{Z()},y.autoclickKey));setInterval(()=>{H("autoclick").gt(0)&&y.autoclickFlag&&(clearInterval(F),F=setInterval(()=>{Z()},y.autoclickKey)),y.autoclickFlag=!1},100);function nr(){p("alphaonetext").innerHTML=`You have ${_(y.alphaone)} α<sub>1</sub>`,p("alphatwotext").innerHTML=`You have ${_(y.alphatwo)} α<sub>2</sub>`,p("overview").innerHTML=`α<sub>1</sub>: ${_(y.alphaone)}<br>
        α<sub>2</sub>: ${_(y.alphatwo)}<br> `,p("doubleaone").innerHTML=`${_(y.doubleaonemult)}x α<sub>1</sub>`}function ar(){for(const r in d){const e=d[r];y[e.currency].gte(e.cost)?p(e.buttonDiv).removeAttribute("disabled"):p(e.buttonDiv).setAttribute("disabled","disabled")}}setInterval(()=>{nr(),ar()},100);setInterval(()=>{W()},4e3);p("wipesave").onclick=()=>{z()}});export default ir();
