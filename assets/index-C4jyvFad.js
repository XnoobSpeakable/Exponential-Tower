var Q=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ce=Q((he,F)=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();const D=new Map;function E(e){const r=D.get(e);if(r!==void 0)return r;const n=document.getElementById(e);if(n===null)throw new Error(`Element ${e} is null.`);return D.set(e,n),n}var t={maxOps:1e3,serializeMode:1,debug:0},A="[ExpantaNumError] ",w=A+"Invalid argument: ",U=/^[-\+]*(Infinity|NaN|(J+|J\^\d+ )?(10(\^+|\{[1-9]\d*\})|\(10(\^+|\{[1-9]\d*\})\)\^[1-9]\d* )*((\d+(\.\d*)?|\d*\.\d+)?([Ee][-\+]*))*(0|\d+(\.\d*)?|\d*\.\d+))$/,p=9007199254740991,R=Math.log10(p),l={},f={},m={};m.ZERO=0;m.ONE=1;m.E=Math.E;m.LN2=Math.LN2;m.LN10=Math.LN10;m.LOG2E=Math.LOG2E;m.LOG10E=Math.LOG10E;m.PI=Math.PI;m.SQRT1_2=Math.SQRT1_2;m.SQRT2=Math.SQRT2;m.MAX_SAFE_INTEGER=p;m.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER;m.NaN=Number.NaN;m.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;m.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;m.E_MAX_SAFE_INTEGER="e"+p;m.EE_MAX_SAFE_INTEGER="ee"+p;m.TETRATED_MAX_SAFE_INTEGER="10^^"+p;m.GRAHAMS_NUMBER="J^63 10^^^(10^)^7625597484984 3638334640023.7783";l.absoluteValue=l.abs=function(){var e=this.clone();return e.sign=1,e};f.absoluteValue=f.abs=function(e){return new t(e).abs()};l.negate=l.neg=function(){var e=this.clone();return e.sign=e.sign*-1,e};f.negate=f.neg=function(e){return new t(e).neg()};l.compareTo=l.cmp=function(e){if(e instanceof t||(e=new t(e)),isNaN(this.array[0][1])||isNaN(e.array[0][1]))return NaN;if(this.array[0][1]==1/0&&e.array[0][1]!=1/0)return this.sign;if(this.array[0][1]!=1/0&&e.array[0][1]==1/0)return-e.sign;if(this.array.length==1&&this.array[0][1]===0&&e.array.length==1&&e.array[0][1]===0)return 0;if(this.sign!=e.sign)return this.sign;var r=this.sign,n;if(this.layer>e.layer)n=1;else if(this.layer<e.layer)n=-1;else{for(var a,i,u=0,o=Math.min(this.array.length,e.array.length);u<o;++u)if(a=this.array[this.array.length-1-u],i=e.array[e.array.length-1-u],a[0]>i[0]||a[0]==i[0]&&a[1]>i[1]){n=1;break}else if(a[0]<i[0]||a[0]==i[0]&&a[1]<i[1]){n=-1;break}n===void 0&&(this.array.length==e.array.length?n=0:this.array.length>e.array.length?(a=this.array[this.array.length-o],a[0]>=1||a[1]>10?n=1:n=-1):(a=e.array[e.array.length-o],a[0]>=1||a[1]>10?n=-1:n=1))}return n*r};f.compare=f.cmp=function(e,r){return new t(e).cmp(r)};l.greaterThan=l.gt=function(e){return this.cmp(e)>0};f.greaterThan=f.gt=function(e,r){return new t(e).gt(r)};l.greaterThanOrEqualTo=l.gte=function(e){return this.cmp(e)>=0};f.greaterThanOrEqualTo=f.gte=function(e,r){return new t(e).gte(r)};l.lessThan=l.lt=function(e){return this.cmp(e)<0};f.lessThan=f.lt=function(e,r){return new t(e).lt(r)};l.lessThanOrEqualTo=l.lte=function(e){return this.cmp(e)<=0};f.lessThanOrEqualTo=f.lte=function(e,r){return new t(e).lte(r)};l.equalsTo=l.equal=l.eq=function(e){return this.cmp(e)===0};f.equalsTo=f.equal=f.eq=function(e,r){return new t(e).eq(r)};l.notEqualsTo=l.notEqual=l.neq=function(e){return this.cmp(e)!==0};f.notEqualsTo=f.notEqual=f.neq=function(e,r){return new t(e).neq(r)};l.minimum=l.min=function(e){return this.lt(e)?this.clone():new t(e)};f.minimum=f.min=function(e,r){return new t(e).min(r)};l.maximum=l.max=function(e){return this.gt(e)?this.clone():new t(e)};f.maximum=f.max=function(e,r){return new t(e).max(r)};l.compareTo_tolerance=l.cmp_tolerance=function(e,r){return e instanceof t||(e=new t(e)),this.eq_tolerance(e,r)?0:this.cmp(e)};f.compare_tolerance=f.cmp_tolerance=function(e,r,n){return new t(e).cmp_tolerance(r,n)};l.greaterThan_tolerance=l.gt_tolerance=function(e,r){return e instanceof t||(e=new t(e)),!this.eq_tolerance(e,r)&&this.gt(e)};f.greaterThan_tolerance=f.gt_tolerance=function(e,r,n){return new t(e).gt_tolerance(r,n)};l.greaterThanOrEqualTo_tolerance=l.gte_tolerance=function(e,r){return e instanceof t||(e=new t(e)),this.eq_tolerance(e,r)||this.gt(e)};f.greaterThanOrEqualTo_tolerance=f.gte_tolerance=function(e,r,n){return new t(e).gte_tolerance(r,n)};l.lessThan_tolerance=l.lt_tolerance=function(e,r){return e instanceof t||(e=new t(e)),!this.eq_tolerance(e,r)&&this.lt(e)};f.lessThan_tolerance=f.lt_tolerance=function(e,r,n){return new t(e).lt_tolerance(r,n)};l.lessThanOrEqualTo_tolerance=l.lte_tolerance=function(e,r){return e instanceof t||(e=new t(e)),this.eq_tolerance(e,r)||this.lt(e)};f.lessThanOrEqualTo_tolerance=f.lte_tolerance=function(e,r,n){return new t(e).lte_tolerance(r,n)};l.equalsTo_tolerance=l.equal_tolerance=l.eq_tolerance=function(e,r){if(e instanceof t||(e=new t(e)),r==null&&(r=1e-7),this.isNaN()||e.isNaN()||this.isFinite()!=e.isFinite()||this.sign!=e.sign||Math.abs(this.layer-e.layer)>1)return!1;var n,a;if(this.layer!=e.layer){var i,u;if(this.layer>e.layer?(i=this,u=e):(i=e,u=this),!(i.array.length==2&&i.array[0][0]===0&&i.array[1][0]==1&&i.array[1][1]==1))return!1;n=i.array[0][1],u.array[u.array.length-1][1]>=10?a=Math.log10(u.array[u.array.length-1][0]+1):a=Math.log10(u.array[u.array.length-1][0])}else{if(Math.abs(this.array[this.array.length-1][0]-e.array[e.array.length-1][0])>1)return!1;for(var o=1;Math.max(this.array.length,e.array.length)-o>=0;++o){var c=this.array[this.array.length-o][0],g=e.array[e.array.length-o][0],i,u,b,v;if(c!=g)c>g?(i=this,u=e):(i=e,u=this,c=g),b=i.array[i.array.length-o][1],v=0;else if(i=this,u=e,b=i.array[i.array.length-o][1],v=u.array[u.array.length-o][1],i.array.length-o==0){n=b,a=v;break}if(Math.abs(b-v)>1)return!1;if(b!=v){if(!(i.array.length-o<2||i.array.length-o==2&&i.array[0][0]===0&&i.array[1][0]==1&&i.array[1][1]==1))return!1;n=i.array[0][1],c==1?a=Math.log10(u.operator(0)):c==2&&u.operator(0)>=1e10?a=Math.log10(u.operator(1)+2):u.operator(c-2)>=10?a=Math.log10(u.operator(c-1)+1):a=Math.log10(u.operator(c-1));break}}}return Math.abs(n-a)<=r*Math.max(Math.abs(n),Math.abs(a))};f.equalsTo_tolerance=f.equal_tolerance=f.eq_tolerance=function(e,r,n){return new t(e).eq_tolerance(r,n)};l.notEqualsTo_tolerance=l.notEqual_tolerance=l.neq_tolerance=function(e,r){return!this.eq_tolerance(e,r)};f.notEqualsTo_tolerance=f.notEqual_tolerance=f.neq_tolerance=function(e,r,n){return new t(e).neq_tolerance(r,n)};l.isPositive=l.ispos=function(){return this.gt(t.ZERO)};f.isPositive=f.ispos=function(e){return new t(e).ispos()};l.isNegative=l.isneg=function(){return this.lt(t.ZERO)};f.isNegative=f.isneg=function(e){return new t(e).isneg()};l.isNaN=function(){return isNaN(this.array[0][1])};f.isNaN=function(e){return new t(e).isNaN()};l.isFinite=function(){return isFinite(this.array[0][1])};f.isFinite=function(e){return new t(e).isFinite()};l.isInfinite=function(){return this.array[0][1]==1/0};f.isInfinite=function(e){return new t(e).isInfinite()};l.isInteger=l.isint=function(){return this.sign==-1?this.abs().isint():this.gt(t.MAX_SAFE_INTEGER)?!0:Number.isInteger(this.toNumber())};f.isInteger=f.isint=function(e){return new t(e).isint()};l.floor=function(){return this.isInteger()?this.clone():new t(Math.floor(this.toNumber()))};f.floor=function(e){return new t(e).floor()};l.ceiling=l.ceil=function(){return this.isInteger()?this.clone():new t(Math.ceil(this.toNumber()))};f.ceiling=f.ceil=function(e){return new t(e).ceil()};l.round=function(){return this.isInteger()?this.clone():new t(Math.round(this.toNumber()))};f.round=function(e){return new t(e).round()};var X=!1;l.plus=l.add=function(e){var r=this.clone();if(e=new t(e),t.debug>=t.NORMAL&&(console.log(this+"+"+e),X||(console.warn(A+"Debug output via 'debug' is being deprecated and will be removed in the future!"),X=!0)),r.sign==-1)return r.neg().add(e.neg()).neg();if(e.sign==-1)return r.sub(e.neg());if(r.eq(t.ZERO))return e;if(e.eq(t.ZERO))return r;if(r.isNaN()||e.isNaN()||r.isInfinite()&&e.isInfinite()&&r.eq(e.neg()))return t.NaN.clone();if(r.isInfinite())return r;if(e.isInfinite())return e;var n=r.min(e),a=r.max(e),i=a.operator(0),u=a.operator(1),o;if(a.gt(t.E_MAX_SAFE_INTEGER)||a.div(n).gt(t.MAX_SAFE_INTEGER))o=a;else if(!u)o=new t(r.toNumber()+e.toNumber());else if(u==1){var c=n.operator(1)?n.operator(0):Math.log10(n.operator(0));o=new t([c+Math.log10(Math.pow(10,i-c)+1),1])}return n=a=null,o};f.plus=f.add=function(e,r){return new t(e).add(r)};l.minus=l.sub=function(e){var r=this.clone();if(e=new t(e),t.debug>=t.NORMAL&&console.log(r+"-"+e),r.sign==-1)return r.neg().sub(e.neg()).neg();if(e.sign==-1)return r.add(e.neg());if(r.eq(e))return t.ZERO.clone();if(e.eq(t.ZERO))return r;if(r.isNaN()||e.isNaN()||r.isInfinite()&&e.isInfinite())return t.NaN.clone();if(r.isInfinite())return r;if(e.isInfinite())return e.neg();var n=r.min(e),a=r.max(e),i=e.gt(r),u=a.operator(0),o=a.operator(1),c;if(a.gt(t.E_MAX_SAFE_INTEGER)||a.div(n).gt(t.MAX_SAFE_INTEGER))c=a,c=i?c.neg():c;else if(!o)c=new t(r.toNumber()-e.toNumber());else if(o==1){var g=n.operator(1)?n.operator(0):Math.log10(n.operator(0));c=new t([g+Math.log10(Math.pow(10,u-g)-1),1]),c=i?c.neg():c}return n=a=null,c};f.minus=f.sub=function(e,r){return new t(e).sub(r)};l.times=l.mul=function(e){var r=this.clone();if(e=new t(e),t.debug>=t.NORMAL&&console.log(r+"*"+e),r.sign*e.sign==-1)return r.abs().mul(e.abs()).neg();if(r.sign==-1)return r.abs().mul(e.abs());if(r.isNaN()||e.isNaN()||r.eq(t.ZERO)&&e.isInfinite()||r.isInfinite()&&e.abs().eq(t.ZERO))return t.NaN.clone();if(e.eq(t.ZERO))return t.ZERO.clone();if(e.eq(t.ONE))return r.clone();if(r.isInfinite())return r;if(e.isInfinite())return e;if(r.max(e).gt(t.EE_MAX_SAFE_INTEGER))return r.max(e);var n=r.toNumber()*e.toNumber();return n<=p?new t(n):t.pow(10,r.log10().add(e.log10()))};f.times=f.mul=function(e,r){return new t(e).mul(r)};l.divide=l.div=function(e){var r=this.clone();if(e=new t(e),t.debug>=t.NORMAL&&console.log(r+"/"+e),r.sign*e.sign==-1)return r.abs().div(e.abs()).neg();if(r.sign==-1)return r.abs().div(e.abs());if(r.isNaN()||e.isNaN()||r.isInfinite()&&e.isInfinite()||r.eq(t.ZERO)&&e.eq(t.ZERO))return t.NaN.clone();if(e.eq(t.ZERO))return t.POSITIVE_INFINITY.clone();if(e.eq(t.ONE))return r.clone();if(r.eq(e))return t.ONE.clone();if(r.isInfinite())return r;if(e.isInfinite())return t.ZERO.clone();if(r.max(e).gt(t.EE_MAX_SAFE_INTEGER))return r.gt(e)?r.clone():t.ZERO.clone();var n=r.toNumber()/e.toNumber();if(n<=p)return new t(n);var a=t.pow(10,r.log10().sub(e.log10())),i=a.floor();return a.sub(i).lt(new t(1e-9))?i:a};f.divide=f.div=function(e,r){return new t(e).div(r)};l.reciprocate=l.rec=function(){return t.debug>=t.NORMAL&&console.log(this+"^-1"),this.isNaN()||this.eq(t.ZERO)?t.NaN.clone():this.abs().gt("2e323")?t.ZERO.clone():new t(1/this)};f.reciprocate=f.rec=function(e){return new t(e).rec()};l.modular=l.mod=function(e){return e=new t(e),e.eq(t.ZERO)?t.ZERO.clone():this.sign*e.sign==-1?this.abs().mod(e.abs()).neg():this.sign==-1?this.abs().mod(e.abs()):this.sub(this.div(e).floor().mul(e))};f.modular=f.mod=function(e,r){return new t(e).mod(r)};var W=function(e){if(!isFinite(e))return e;if(e<-50)return e==Math.trunc(e)?Number.NEGATIVE_INFINITY:0;for(var r=1;e<10;)r=r*e,++e;e-=1;var n=.9189385332046727;n+=(e+.5)*Math.log(e),n-=e;var a=e*e,i=e;return n+=1/(12*i),i*=a,n-=1/(360*i),i*=i*a,n+=1/(1260*i),i*=a,n-=1/(1680*i),i*=a,n+=1/(1188*i),i*=a,n-=691/(360360*i),i*=a,n+=7/(1092*i),i*=a,n-=3617/(122400*i),Math.exp(n)/r};l.gamma=function(){var e=this.clone();if(e.gt(t.TETRATED_MAX_SAFE_INTEGER))return e;if(e.gt(t.E_MAX_SAFE_INTEGER))return t.exp(e);if(e.gt(t.MAX_SAFE_INTEGER))return t.exp(t.mul(e,t.ln(e).sub(1)));var r=e.operator(0);if(r>1){if(r<24)return new t(W(e.sign*r));var n=r-1,a=.9189385332046727;a+=(n+.5)*Math.log(n),a-=n;var i=n*n,u=n,o=12*u,c=1/o,g=a+c;if(g==a||(a=g,u*=i,o=360*u,c=1/o,g=a-c,g==a))return t.exp(a);a=g,u*=i,o=1260*u;var b=1/o;return a+=b,u*=i,o=1680*u,b=1/o,a-=b,t.exp(a)}else return this.rec()};f.gamma=function(e){return new t(e).gamma()};f.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];l.factorial=l.fact=function(){var e=this.clone(),r=t.factorials;if(e.lt(t.ZERO)||!e.isint())return e.add(1).gamma();if(e.lte(170))return new t(r[+e]);var n=1;return e.div(t.E).pow(e).mul(e.mul(t.PI).mul(2).sqrt()).times(n)};f.factorial=f.fact=function(e){return new t(e).fact()};l.toPower=l.pow=function(e){if(e=new t(e),t.debug>=t.NORMAL&&console.log(this+"^"+e),e.eq(t.ZERO))return t.ONE.clone();if(e.eq(t.ONE))return this.clone();if(e.lt(t.ZERO))return this.pow(e.neg()).rec();if(this.lt(t.ZERO)&&e.isint())return e.mod(2).lt(t.ONE)?this.abs().pow(e):this.abs().pow(e).neg();if(this.lt(t.ZERO))return t.NaN.clone();if(this.eq(t.ONE))return t.ONE.clone();if(this.eq(t.ZERO))return t.ZERO.clone();if(this.max(e).gt(t.TETRATED_MAX_SAFE_INTEGER))return this.max(e);if(this.eq(10))return e.gt(t.ZERO)?(e.operator(1,e.operator(1)+1||1),e.normalize(),e):new t(Math.pow(10,e.toNumber()));if(e.lt(t.ONE))return this.root(e.rec());var r=Math.pow(this.toNumber(),e.toNumber());return r<=p?new t(r):t.pow(10,this.log10().mul(e))};f.toPower=f.pow=function(e,r){return new t(e).pow(r)};l.exponential=l.exp=function(){return t.pow(Math.E,this)};f.exponential=f.exp=function(e){return t.pow(Math.E,e)};l.squareRoot=l.sqrt=function(){return this.root(2)};f.squareRoot=f.sqrt=function(e){return new t(e).root(2)};l.cubeRoot=l.cbrt=function(){return this.root(3)};f.cubeRoot=f.cbrt=function(e){return new t(e).root(3)};l.root=function(e){return e=new t(e),t.debug>=t.NORMAL&&console.log(this+"root"+e),e.eq(t.ONE)?this.clone():e.lt(t.ZERO)?this.root(e.neg()).rec():e.lt(t.ONE)?this.pow(e.rec()):this.lt(t.ZERO)&&e.isint()&&e.mod(2).eq(t.ONE)?this.neg().root(e).neg():this.lt(t.ZERO)?t.NaN.clone():this.eq(t.ONE)?t.ONE.clone():this.eq(t.ZERO)?t.ZERO.clone():this.max(e).gt(t.TETRATED_MAX_SAFE_INTEGER)?this.gt(e)?this.clone():t.ZERO.clone():t.pow(10,this.log10().div(e))};f.root=function(e,r){return new t(e).root(r)};l.generalLogarithm=l.log10=function(){var e=this.clone();return t.debug>=t.NORMAL&&console.log("log"+this),e.lt(t.ZERO)?t.NaN.clone():e.eq(t.ZERO)?t.NEGATIVE_INFINITY.clone():e.lte(t.MAX_SAFE_INTEGER)?new t(Math.log10(e.toNumber())):!e.isFinite()||e.gt(t.TETRATED_MAX_SAFE_INTEGER)?e:(e.operator(1,e.operator(1)-1),e.normalize())};f.generalLogarithm=f.log10=function(e){return new t(e).log10()};l.logarithm=l.logBase=function(e){return e===void 0&&(e=Math.E),this.log10().div(t.log10(e))};f.logarithm=f.logBase=function(e,r){return new t(e).logBase(r)};l.naturalLogarithm=l.log=l.ln=function(){return this.logBase(Math.E)};f.naturalLogarithm=f.log=f.ln=function(e){return new t(e).ln()};var V=.5671432904097838,P=function(e,r,n){r===void 0&&(r=1e-10),n===void 0&&(n=!0);var a;if(!Number.isFinite(e))return e;if(n){if(e===0)return e;if(e===1)return V;e<10?a=0:a=Math.log(e)-Math.log(Math.log(e))}else{if(e===0)return-1/0;e<=-.1?a=-2:a=Math.log(-e)-Math.log(-Math.log(-e))}for(var i=0;i<100;++i){var u=(e*Math.exp(-a)+a*a)/(a+1);if(Math.abs(u-a)<r*Math.abs(u))return u;a=u}throw Error("Iteration failed to converge: "+e)},J=function(e,r,n){r===void 0&&(r=1e-10),n===void 0&&(n=!0),e=new t(e);var a;if(!e.isFinite())return e;if(n){if(e.eq(t.ZERO))return e;if(e.eq(t.ONE))return new t(V);a=t.ln(e)}else{if(e.eq(t.ZERO))return t.NEGATIVE_INFINITY.clone();a=t.ln(e.neg())}for(var i=0;i<100;++i){var u=a.neg().exp(),o=a.sub(e.mul(u)),c=a.add(t.ONE).sub(a.add(2).mul(o).div(t.mul(2,a).add(2)));if(c.eq(t.ZERO))return a;var g=a.sub(o.div(c));if(t.abs(g.sub(a)).lt(t.abs(g).mul(r)))return g;a=g}throw Error("Iteration failed to converge: "+e)};l.lambertw=function(e){e===void 0&&(e=!0);var r=this.clone();return r.isNaN()?r:r.lt(-.3678794411710499)?t.NaN.clone():e?r.gt(t.TETRATED_MAX_SAFE_INTEGER)?r:r.gt(t.EE_MAX_SAFE_INTEGER)?(r.operator(1,r.operator(1)-1),r):r.gt(t.MAX_SAFE_INTEGER)?J(r):new t(P(r.sign*r.operator(0))):r.ispos()?t.NaN.clone():r.abs().gt(t.EE_MAX_SAFE_INTEGER)?r.neg().recip().lambertw().neg():r.abs().gt(t.MAX_SAFE_INTEGER)?J(r,1e-10,!1):new t(P(r.sign*r.operator(0),1e-10,!1))};f.lambertw=function(e,r){return new t(e).lambertw(r)};l.tetrate=l.tetr=function(e,r){r===void 0&&(r=t.ONE);var n=this.clone();e=new t(e),r=new t(r),r.neq(t.ONE)&&(e=e.add(r.slog(n))),t.debug>=t.NORMAL&&console.log(n+"^^"+e);var a;if(n.isNaN()||e.isNaN()||r.isNaN())return t.NaN.clone();if(e.isInfinite()&&e.sign>0)return n.gte(Math.exp(1/Math.E))?t.POSITIVE_INFINITY.clone():(a=n.ln().neg(),a.lambertw().div(a));if(e.lte(-2))return t.NaN.clone();if(n.eq(t.ZERO))return e.eq(t.ZERO)?t.NaN.clone():e.mod(2).eq(t.ZERO)?t.ZERO.clone():t.ONE.clone();if(n.eq(t.ONE))return e.eq(t.ONE.neg())?t.NaN.clone():t.ONE.clone();if(e.eq(t.ONE.neg()))return t.ZERO.clone();if(e.eq(t.ZERO))return t.ONE.clone();if(e.eq(t.ONE))return n;if(e.eq(2))return n.pow(n);if(n.eq(2)){if(e.eq(3))return new t(16);if(e.eq(4))return new t(65536)}var i=n.max(e);if(i.gt("10^^^"+p))return i;if(i.gt(t.TETRATED_MAX_SAFE_INTEGER)||e.gt(t.MAX_SAFE_INTEGER)){if(this.lt(Math.exp(1/Math.E)))return a=n.ln().neg(),a.lambertw().div(a);var u=n.slog(10).add(e);return u.operator(2,(u.operator(2)||0)+1),u.normalize(),u}for(var o=e.toNumber(),c=Math.floor(o),g=n.pow(o-c),b=t.NaN,v=0,N=new t(t.E_MAX_SAFE_INTEGER);c!==0&&g.lt(N)&&v<100;++v)if(c>0){if(g=n.pow(g),b.eq(g)){c=0;break}b=g,--c}else{if(g=g.logBase(n),b.eq(g)){c=0;break}b=g,++c}return(v==100||this.lt(Math.exp(1/Math.E)))&&(c=0),g.operator(1,g.operator(1)+c||c),g.normalize(),g};f.tetrate=f.tetr=function(e,r,n){return new t(e).tetr(r,n)};l.iteratedexp=function(e,r){return this.tetr(e,r)};f.iteratedexp=function(e,r,n){return new t(e).iteratedexp(r,n)};l.iteratedlog=function(e,r){e===void 0&&(e=10),r===void 0&&(r=t.ONE.clone());var n=this.clone();return e=new t(e),r=new t(r),r.eq(t.ZERO)?n:r.eq(t.ONE)?n.logBase(e):e.tetr(n.slog(e).sub(r))};f.iteratedlog=function(e,r,n){return new t(e).iteratedlog(r,n)};l.layeradd=function(e,r){r===void 0&&(r=10),e===void 0&&(e=t.ONE.clone());var n=this.clone();return r=new t(r),e=new t(e),r.tetr(n.slog(r).add(e))};f.layeradd=function(e,r,n){return new t(e).layeradd(r,n)};l.layeradd10=function(e){return this.layeradd(e)};f.layeradd10=function(e,r){return new t(e).layeradd10(r)};l.ssqrt=l.ssrt=function(){var e=this.clone();if(e.lt(Math.exp(-1/Math.E)))return t.NaN.clone();if(!e.isFinite()||e.gt(t.TETRATED_MAX_SAFE_INTEGER))return e;if(e.gt(t.EE_MAX_SAFE_INTEGER))return e.operator(1,e.operator(1)-1),e;var r=e.ln();return r.div(r.lambertw())};f.ssqrt=f.ssrt=function(e){return new t(e).ssqrt()};l.slog=function(e){e===void 0&&(e=10);var r=new t(this);if(e=new t(e),r.isNaN()||e.isNaN()||r.isInfinite()&&e.isInfinite())return t.NaN.clone();if(r.isInfinite())return r;if(e.isInfinite())return t.ZERO.clone();if(r.lt(t.ZERO))return t.ONE.neg();if(r.eq(t.ONE))return t.ZERO.clone();if(r.eq(e))return t.ONE.clone();if(e.lt(Math.exp(1/Math.E))){var n=t.tetr(e,1/0);if(r.eq(n))return t.POSITIVE_INFINITY.clone();if(r.gt(n))return t.NaN.clone()}if(r.max(e).gt("10^^^"+p))return r.gt(e)?r:t.ZERO.clone();if(r.max(e).gt(t.TETRATED_MAX_SAFE_INTEGER))return r.gt(e)?(r.operator(2,r.operator(2)-1),r.normalize(),r.sub(r.operator(1))):t.ZERO.clone();var a=0,i=(r.operator(1)||0)-(e.operator(1)||0);if(i>3){var u=i-3;a+=u,r.operator(1,r.operator(1)-u)}for(var o=0;o<100;++o)if(r.lt(t.ZERO))r=t.pow(e,r),--a;else{if(r.lte(1))return new t(a+r.toNumber()-1);++a,r=t.logBase(r,e)}if(r.gt(10))return new t(a)};f.slog=function(e,r){return new t(e).slog(r)};l.pentate=l.pent=function(e){return this.arrow(3)(e)};f.pentate=f.pent=function(e,r){return t.arrow(e,3,r)};l.arrow=function(e){var r=this.clone();return e=new t(e),!e.isint()||e.lt(t.ZERO)?function(n){return t.NaN.clone()}:e.eq(t.ZERO)?function(n){return r.mul(n)}:e.eq(t.ONE)?function(n){return r.pow(n)}:e.eq(2)?function(n){return r.tetr(n)}:function(n){var a;arguments.length==2?a=arguments[1]:a=0,n=new t(n);var i;if(t.debug>=t.NORMAL&&console.log(r+"{"+e+"}"+n),r.isNaN()||n.isNaN()||n.lt(t.ZERO))return t.NaN.clone();if(r.eq(t.ZERO))return n.eq(t.ONE)?t.ZERO.clone():t.NaN.clone();if(r.eq(t.ONE)||n.eq(t.ZERO))return t.ONE.clone();if(n.eq(t.ONE))return r.clone();if(e.gt(t.MAX_SAFE_INTEGER))return i=e.clone(),i.layer++,i;var u=e.toNumber();if(n.eq(2))return r.arrow(u-1)(r,a+1);if(r.max(n).gt("10{"+(u+1)+"}"+p))return r.max(n);if(r.gt("10{"+u+"}"+p)||n.gt(t.MAX_SAFE_INTEGER)){r.gt("10{"+u+"}"+p)?(i=r.clone(),i.operator(u,i.operator(u)-1),i.normalize()):r.gt("10{"+(u-1)+"}"+p)?i=new t(r.operator(u-1)):i=t.ZERO;var o=i.add(n);return o.operator(u,(o.operator(u)||0)+1),o.normalize(),o}if(a>=t.maxOps+10)return new t([[0,10],[u,1]]);var c=n.toNumber(),g=Math.floor(c),b=e.sub(t.ONE);i=r.arrow(b)(c-g,a+1);for(var v=0,N=new t("10{"+(u-1)+"}"+p);g!==0&&i.lt(N)&&v<100;++v)g>0&&(i=r.arrow(b)(i,a+1),--g);return v==100&&(g=0),i.operator(u-1,i.operator(u-1)+g||g),i.normalize(),i}};l.chain=function(e,r){return this.arrow(r)(e)};f.arrow=function(e,r,n){return new t(e).arrow(r)(n)};f.chain=function(e,r,n){return new t(e).arrow(n)(r)};f.hyper=function(e){return e=new t(e),e.eq(t.ZERO)?function(r,n){return new t(n).eq(t.ZERO)?new t(r):new t(r).add(t.ONE)}:e.eq(t.ONE)?function(r,n){return t.add(r,n)}:function(r,n){return new t(r).arrow(e.sub(2))(n)}};l.expansion=function(e){var r=this.clone();e=new t(e);var n;if(t.debug>=t.NORMAL&&console.log("{"+r+","+e+",1,2}"),e.lte(t.ZERO)||!e.isint())return t.NaN.clone();if(e.eq(t.ONE))return r.clone();if(!r.isint())return t.NaN.clone();if(r.eq(2))return new t(4);if(e.gt(t.MAX_SAFE_INTEGER))return t.POSITIVE_INFINITY.clone();var a=e.toNumber()-1;n=r;for(var i=0;a!==0&&n.lt(t.MAX_SAFE_INTEGER)&&i<100;++i)a>0&&(n=r.arrow(n)(r),--a);return i==100&&(a=0),n.layer+=a,n.normalize(),n};f.expansion=function(e,r){return new t(e).expansion(r)};f.affordGeometricSeries=function(e,r,n,a){e=new t(e),r=new t(r),n=new t(n);var i=r.mul(n.pow(a));return t.floor(e.div(i).mul(n.sub(t.ONE)).add(t.ONE).log10().div(n.log10()))};f.affordArithmeticSeries=function(e,r,n,a){e=new t(e),r=new t(r),n=new t(n),a=new t(a);var i=r.add(a.mul(n)),u=i.sub(n.div(2)),o=u.pow(2);return u.neg().add(o.add(n.mul(e).mul(2)).sqrt()).div(n).floor()};f.sumGeometricSeries=function(e,r,n,a){return r=new t(r),n=new t(n),r.mul(n.pow(a)).mul(t.sub(t.ONE,n.pow(e))).div(t.sub(t.ONE,n))};f.sumArithmeticSeries=function(e,r,n,a){e=new t(e),r=new t(r),a=new t(a);var i=r.add(a.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(t.ONE).mul(n)))};f.choose=function(e,r){return new t(e).factorial().div(new t(r).factorial().mul(new t(e).sub(new t(r)).factorial()))};l.choose=function(e){return t.choose(this,e)};l.normalize=function(){var e,r=this;if(t.debug>=t.ALL&&console.log(r.toString()),(!r.array||!r.array.length)&&(r.array=[[0,0]]),r.sign!=1&&r.sign!=-1&&(typeof r.sign!="number"&&(r.sign=Number(r.sign)),r.sign=r.sign<0?-1:1),r.layer>p)return r.array=[[0,1/0]],r.layer=0,r;Number.isInteger(r.layer)&&(r.layer=Math.floor(r.layer));for(var n=0;n<r.array.length;++n){var a=r.array[n];if((a[0]===null||a[0]===void 0)&&(a[0]=0),a[0]!==0&&(a[1]===0||a[1]===null||a[1]===void 0)){r.array.splice(n,1),--n;continue}if(isNaN(a[0])||isNaN(a[1]))return r.array=[[0,NaN]],r;if(!isFinite(a[0])||!isFinite(a[1]))return r.array=[[0,1/0]],r;Number.isInteger(a[0])||(a[0]=Math.floor(a[0])),a[0]!==0&&!Number.isInteger(a[1])&&(a[1]=Math.floor(a[1]))}do{for(t.debug>=t.ALL&&console.log(r.toString()),e=!1,r.array.sort(function(i,u){return i[0]>u[0]?1:i[0]<u[0]?-1:0}),r.array.length>t.maxOps&&r.array.splice(0,r.array.length-t.maxOps),r.array.length||(r.array=[[0,0]]),r.array[r.array.length-1][0]>p?(r.layer++,r.array=[[0,r.array[r.array.length-1][0]]],e=!0):r.layer&&r.array.length==1&&r.array[0][0]===0&&(r.layer--,r.array[0][1]===0?r.array=[[0,10]]:r.array=[[0,10],[Math.round(r.array[0][1]),1]],e=!0),r.array.length<t.maxOps&&r.array[0][0]!==0&&r.array.unshift([0,10]),n=0;n<r.array.length-1;++n)r.array[n][0]==r.array[n+1][0]&&(r.array[n][1]+=r.array[n+1][1],r.array.splice(n+1,1),--n,e=!0);for(r.array[0][0]===0&&r.array[0][1]>p&&(r.array.length>=2&&r.array[1][0]==1?r.array[1][1]++:r.array.splice(1,0,[1,1]),r.array[0][1]=Math.log10(r.array[0][1]),e=!0);r.array.length>=2&&r.array[0][0]===0&&r.array[0][1]<R&&r.array[1][0]==1&&r.array[1][1];)r.array[0][1]=Math.pow(10,r.array[0][1]),r.array[1][1]>1?r.array[1][1]--:r.array.splice(1,1),e=!0;for(;r.array.length>=2&&r.array[0][0]===0&&r.array[0][1]==1&&r.array[1][1];)r.array[1][1]>1?r.array[1][1]--:r.array.splice(1,1),r.array[0][1]=10;for(r.array.length>=2&&r.array[0][0]===0&&r.array[1][0]!=1&&(r.array[0][1]&&r.array.splice(1,0,[r.array[1][0]-1,r.array[0][1]]),r.array[0][1]=1,r.array[2][1]>1?r.array[2][1]--:r.array.splice(2,1),e=!0),n=1;n<r.array.length;++n)r.array[n][1]>p&&(n!=r.array.length-1&&r.array[n+1][0]==r.array[n][0]+1?r.array[n+1][1]++:r.array.splice(n+1,0,[r.array[n][0]+1,1]),r.array[0][0]===0?r.array[0][1]=r.array[n][1]+1:r.array.splice(0,0,[0,r.array[n][1]+1]),r.array.splice(1,n),e=!0)}while(e);return r.array.length||(r.array=[[0,0]]),r};var $=!1;l.standardize=function(){return $||(console.warn(A+"'standardize' method is being deprecated in favor of 'normalize' and will be removed in the future!"),$=!0),this.normalize()};l.toNumber=function(){return this.sign==-1?-1*this.abs():this.array.length>=2&&(this.array[1][0]>=2||this.array[1][1]>=2||this.array[1][1]==1&&this.array[0][1]>Math.log10(Number.MAX_VALUE))?1/0:this.array.length>=2&&this.array[1][1]==1?Math.pow(10,this.array[0][1]):this.array[0][1]};l.toString=function(){if(this.sign==-1)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var e="";if(this.layer?this.layer<3?e+="J".repeat(this.layer):e+="J^"+this.layer+" ":e+="",this.array.length>=3||this.array.length==2&&this.array[1][0]>=2)for(var r=this.array.length-1;r>=2;--r){var n=this.array[r],a=n[0]>=5?"{"+n[0]+"}":"^".repeat(n[0]);n[1]>1?e+="(10"+a+")^"+n[1]+" ":n[1]==1&&(e+="10"+a)}var i=this.operator(0),u=this.operator(1);return u?u<3?e+="e".repeat(u-1)+Math.pow(10,i-Math.floor(i))+"e"+Math.floor(i):u<8?e+="e".repeat(u)+i:e+="(10^)^"+u+" "+i:e+=String(i),e};var T=function(r,n){var a=n+1,i=Math.ceil(Math.log10(Math.abs(r)));i<100&&(i=0);var u=Math.round(r*Math.pow(10,a-i))*Math.pow(10,i-a);return parseFloat(u.toFixed(Math.max(a-i,0)))};l.toStringWithDecimalPlaces=function(e,r,n=0){if(this.sign==-1)return"-"+this.abs();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";var a=0,i="",u=Math.pow(10,e+n);if(this.layer?this.layer<3?i+="J".repeat(this.layer):i+="J^"+this.layer+" ":i+="",this.array.length>=3||this.array.length==2&&this.array[1][0]>=2)for(var o=this.array.length-1;!a&&o>=2;--o){var c=this.array[o],g=c[0],b=c[1];r&&b>=u?(++g,a=b,b=1):r&&this.array[o-1][0]==g-1&&this.array[o-1][1]>=u&&(++b,a=this.array[o-1][1]);var v=g>=5?"{"+g+"}":"^".repeat(g);b>1?i+="(10"+v+")^"+b+" ":b==1&&(i+="10"+v)}var N=this.operator(0),d=this.operator(1);return N>u&&(N=Math.log10(N),++d),a?i+=T(a,e):d?d<3?i+="e".repeat(d-1)+T(Math.pow(10,N-Math.floor(N)),e)+"e"+T(Math.floor(N),e):d<8?i+="e".repeat(d)+T(N,e):r?i+="(10^)^"+T(d,e)+" "+T(N,e):i+="(10^)^"+d+" "+T(N,e):i+=String(T(N,e)),i};l.toExponential=function(e,r){return this.array.length==1?(this.sign*this.array[0][1]).toExponential(e):this.toStringWithDecimalPlaces(e,r)};l.toFixed=function(e,r){return this.array.length==1?(this.sign*this.array[0][1]).toFixed(e):this.toStringWithDecimalPlaces(e,r)};l.toPrecision=function(e,r){return this.array[0][1]===0?(this.sign*this.array[0][1]).toFixed(e-1,r):this.array.length==1&&this.array[0][1]<1e-6?this.toExponential(e-1,r):this.array.length==1&&e>Math.log10(this.array[0][1])?this.toFixed(e-Math.floor(Math.log10(this.array[0][1]))-1,r):this.toExponential(e-1,r)};l.valueOf=function(){return this.toString()};l.toJSON=function(){if(t.serializeMode==t.JSON){for(var e=[],r=0;r<this.array.length;++r)e.push([this.array[r][0],this.array[r][1]]);return{array:e,layer:this.layer,sign:this.sign}}else if(t.serializeMode==t.STRING)return this.toString()};l.toHyperE=function(){if(this.layer)throw Error(A+"Sorry, but this prototype doesn't support correct Hyper-E notation for numbers larger than 10{MSI}10");if(this.sign==-1)return"-"+this.abs().toHyperE();if(isNaN(this.array[0][1]))return"NaN";if(!isFinite(this.array[0][1]))return"Infinity";if(this.lt(t.MAX_SAFE_INTEGER))return String(this.array[0][1]);if(this.lt(t.E_MAX_SAFE_INTEGER))return"E"+this.array[0][1];for(var e="E"+this.operator(0)+"#"+this.operator(1),r=1,n=Math.ceil(this.getOperatorIndex(2));n<this.array.length;++n)r+1<this.array[n][0]&&(e+="#1".repeat(this.array[n][0]-r-1)),r=this.array[n][0],e+="#"+(this.array[n][1]+1);return this.layer?this.layer<3?e="J".repeat(this.layer)+e:e="J^"+this.layer+" "+e:e=""+e,e};f.fromNumber=function(e){if(typeof e!="number")throw Error(w+"Expected Number");var r=new t;return r.array[0][1]=Math.abs(e),r.sign=e<0?-1:1,r.normalize(),r};var j=function(r){for(var n=BigInt(64);r>=BigInt(1)<<n;)n*=BigInt(2);for(var a=n/BigInt(2);a>BigInt(0);)r>=BigInt(1)<<n?n+=a:n-=a,a/=BigInt(2);var i=n-BigInt(54),u=r>>i;return Math.log10(Number(u))+Math.LOG10E/Math.LOG2E*Number(i)};f.fromBigInt=function(e){if(typeof e!="bigint")throw Error(w+"Expected BigInt");var r=new t,n=e<BigInt(0)?-e:e;return r.sign=e<BigInt(0)?-1:1,n<=p?r.array[0][1]=Number(n):r.array=[[0,j(n)],[1,1]],r.normalize(),r};var q=17,H=function(r){return Math.log10(Number(r.substring(0,q)))+(r.length-q)};f.fromString=function(e){if(typeof e!="string")throw Error(w+"Expected String");var r=!1;if(typeof e=="string"&&(e[0]=="["||e[0]=="{"))try{JSON.parse(e)}finally{r=!0}if(r)return t.fromJSON(e);var n=new t;if(n.array=[[0,0]],!U.test(e))return console.warn(A+"Malformed input: "+e),n.array=[[0,NaN]],n;var a=!1;if(e[0]=="-"||e[0]=="+"){var i=e.search(/[^-\+]/),u=e.substring(0,i);a=u.match(/-/g).length%2==1,e=e.substring(i)}if(e=="NaN")n.array=[[0,NaN]];else if(e=="Infinity")n.array=[[0,1/0]];else{var o,c,g,b,v;for(e[0]=="J"&&(e[1]=="^"?(o=e.substring(2).search(/[^0-9]/)+2,n.layer=Number(e.substring(2,o)),e=e.substring(o+1)):(o=e.search(/[^J]/),n.layer=o,e=e.substring(o)));e&&/^\(?10[\^\{]/.test(e);){e[0]=="("&&(e=e.substring(1));var N;e[2]=="^"?(o=e.substring(2).search(/[^\^]/),N=o,c=o+2):(o=e.indexOf("}"),N=Number(e.substring(3,o)),c=o+1),e=e.substring(c),e[0]==")"?(o=e.indexOf(" "),g=Number(e.substring(2,o)),e=e.substring(o+1)):g=1,N==1?n.array.length>=2&&n.array[1][0]==1?n.array[1][1]+=g:n.array.splice(1,0,[1,g]):N==2?(o=n.array.length>=2&&n.array[1][0]==1?n.array[1][1]:0,c=n.array[0][1],c>=1e10&&++o,c>=10&&++o,n.array[0][1]=o,n.array.length>=2&&n.array[1][0]==1&&n.array.splice(1,1),b=n.getOperatorIndex(2),Number.isInteger(b)?n.array[b][1]+=g:n.array.splice(Math.ceil(b),0,[2,g])):(o=n.operator(N-1),c=n.operator(N-2),c>=10&&++o,b=n.getOperatorIndex(N),n.array.splice(1,Math.ceil(b)-1),n.array[0][1]=o,Number.isInteger(b)?n.array[1][1]+=g:n.array.splice(1,0,[N,g]))}for(o=e.split(/[Ee]/),c=[n.array[0][1],0],g=1,v=o.length-1;v>=0;--v){c[0]<R&&c[1]===0?c[0]=Math.pow(10,g*c[0]):g==-1?(c[1]===0?c[0]=Math.pow(10,g*c[0]):c[1]==1&&c[0]<=Math.log10(Number.MAX_VALUE)?c[0]=Math.pow(10,g*Math.pow(10,c[0])):c[0]=0,c[1]=0):c[1]++;var d=o[v].indexOf("."),_=d==-1?o[v].length:d;c[1]===0?_>=q?(c[0]=Math.log10(c[0])+H(o[v].substring(0,_)),c[1]=1):o[v]&&(c[0]*=Number(o[v])):(b=_>=q?H(o[v].substring(0,_)):o[v]?Math.log10(Number(o[v])):0,c[1]==1?c[0]+=b:c[1]==2&&c[0]<R+Math.log10(b)&&(c[0]+=Math.log10(1+Math.pow(10,Math.log10(b)-c[0])))),c[0]<R&&c[1]?(c[0]=Math.pow(10,c[0]),c[1]--):c[0]>p&&(c[0]=Math.log10(c[0]),c[1]++)}n.array[0][1]=c[0],c[1]&&(n.array.length>=2&&n.array[1][0]==1?n.array[1][1]+=c[1]:n.array.splice(1,0,[1,c[1]]))}return a&&(n.sign*=-1),n.normalize(),n};f.fromArray=function(e,r,n){var a,i;if(e instanceof Array&&(r===void 0||typeof r=="number")&&(n===void 0||typeof n=="number"))a=e,i=r;else if(typeof e=="number"&&r instanceof Array&&(n===void 0||typeof n=="number"))a=r,i=e;else if(typeof e=="number"&&typeof r=="number"&&n instanceof Array)a=n,i=e;else throw Error(w+"Expected an Array [and 1 or 2 Number]");var u=new t,o;if(!a.length)u.array=[[0,0]];else if(typeof a[0]=="number")for(u.array=[],o=0;o<a.length;o++){if(typeof a[o]!="number")throw Error(w+"Expected Array of Number");u.array.push([o,a[o]])}else if(a[0]instanceof Array)for(u.array=[],o=0;o<a.length;o++){if(!(a[o]instanceof Array)||typeof a[o][0]!="number"||typeof a[o][1]!="number")throw Error(w+"Expected Array of pair of Number");u.array.push([a[o][0],a[o][1]])}else throw Error(w+"Expected Array of Number or Array of pair of Number");return i?u.sign=Number(i):u.sign=1,u.normalize(),u};f.fromObject=function(e){if(typeof e!="object")throw Error(w+"Expected Object");if(e===null)return t.ZERO.clone();if(e instanceof Array)return t.fromArray(e);if(e instanceof t)return new t(e);if(!(e.array instanceof Array))throw Error(w+"Expected that property 'array' exists");if(e.sign!==void 0&&typeof e.sign!="number")throw Error(w+"Expected that property 'sign' is Number");if(e.layer!==void 0&&typeof e.layer!="number")throw Error(w+"Expected that property 'layer' is Number");return t.fromArray(e.array,e.sign,e.layer)};f.fromJSON=function(e){if(typeof e=="object")return t.fromObject(r);if(typeof e!="string")throw Error(w+"Expected String");var r,n;try{r=JSON.parse(e)}catch(a){throw r=null,a}finally{n=t.fromObject(r)}return r=null,n};f.fromHyperE=function(e){if(typeof e!="string")throw Error(w+"Expected String");var r=new t;if(r.array=[[0,0]],!/^[-\+]*(0|[1-9]\d*(\.\d*)?|Infinity|NaN|E[1-9]\d*(\.\d*)?(#[1-9]\d*)*)$/.test(e))return console.warn(A+"Malformed input: "+e),r.array=[[0,NaN]],r;var n=!1;if(e[0]=="-"||e[0]=="+"){var a=e.search(/[^-\+]/),i=e.substring(0,a);n=i.match(/-/g).length%2===0,e=e.substring(a)}if(e=="NaN")r.array=[[0,NaN]];else if(e=="Infinity")r.array=[[0,1/0]];else if(e[0]!="E")r.array[0][1]=Number(e);else if(e.indexOf("#")==-1)r.array[0][1]=Number(e.substring(1)),r.array[1]=[1,1];else for(var u=e.substring(1).split("#"),o=0;o<u.length;++o){var c=Number(u[o]);o>=2&&--c,r.array[o]=[o,c]}return n&&(r.sign*=-1),r.normalize(),r};l.getOperatorIndex=function(e){if(typeof e!="number"&&(e=Number(e)),!isFinite(e))throw Error(w+"Index out of range.");var r=this.array,n=0,a=r.length-1;if(r[a][0]<e)return a+.5;if(r[n][0]>e)return-.5;for(;n!=a;){if(r[n][0]==e)return n;if(r[a][0]==e)return a;var i=Math.floor((n+a)/2);if(n==i||r[i][0]==e){n=i;break}r[i][0]<e&&(n=i),r[i][0]>e&&(a=i)}return r[n][0]==e?n:n+.5};l.getOperator=function(e){if(typeof e!="number"&&(e=Number(e)),!isFinite(e))throw Error(w+"Index out of range.");var r=this.getOperatorIndex(e);return Number.isInteger(r)?this.array[r][1]:e===0?10:0};l.setOperator=function(e,r){if(typeof e!="number"&&(e=Number(e)),!isFinite(e))throw Error(w+"Index out of range.");var n=this.getOperatorIndex(e);Number.isInteger(n)?this.array[n][1]=r:(n=Math.ceil(n),this.array.splice(n,0,[e,r])),this.normalize()};l.operator=function(e,r){if(r===void 0)return this.getOperator(e);this.setOperator(e,r)};l.clone=function(){for(var e=new t,r=[],n=0;n<this.array.length;++n)r.push([this.array[n][0],this.array[n][1]]);return e.array=r,e.sign=this.sign,e.layer=this.layer,e};function Y(e){var r,n,a;function i(o,c){var g=this;if(!(g instanceof i))return new i(o,c);g.constructor=i;var b=null;if(typeof o=="string"&&(o[0]=="["||o[0]=="{"))try{b=JSON.parse(o)}catch{}var v,N,d;if(typeof o=="number"&&!(c instanceof Array))v=i.fromNumber(o);else if(typeof o=="bigint")v=i.fromBigInt(o);else if(b)v=i.fromObject(b);else if(typeof o=="string"&&o[0]=="E")v=i.fromHyperE(o);else if(typeof o=="string")v=i.fromString(o);else if(o instanceof Array||c instanceof Array)v=i.fromArray(o,c);else if(o instanceof i){v=[];for(var _=0;_<o.array.length;++_)v.push([o.array[_][0],o.array[_][1]]);N=o.sign,d=o.layer}else typeof o=="object"?v=i.fromObject(o):(v=[[0,NaN]],N=1,d=0);return typeof N>"u"?(g.array=v.array,g.sign=v.sign,g.layer=v.layer):(g.array=v,g.sign=N,g.layer=d),g}i.prototype=l,i.JSON=0,i.STRING=1,i.NONE=0,i.NORMAL=1,i.ALL=2,i.clone=Y,i.config=i.set=ee;for(var u in f)f.hasOwnProperty(u)&&(i[u]=f[u]);if(e===void 0&&(e={}),e)for(a=["maxOps","serializeMode","debug"],r=0;r<a.length;)e.hasOwnProperty(n=a[r++])||(e[n]=this[n]);return i.config(e),i}function z(e){for(var r in m)m.hasOwnProperty(r)&&(Object.defineProperty?Object.defineProperty(e,r,{configurable:!1,enumerable:!0,writable:!1,value:new t(m[r])}):e[r]=new t(m[r]));return e}function ee(e){if(!e||typeof e!="object")throw Error(A+"Object expected");var r,n,a,i=["maxOps",1,Number.MAX_SAFE_INTEGER,"serializeMode",0,1,"debug",0,2];for(r=0;r<i.length;r+=3)if((a=e[n=i[r]])!==void 0)if(Math.floor(a)===a&&a>=i[r+1]&&a<=i[r+2])this[n]=a;else throw Error(w+n+": "+a);return this}t=Y(t);const y=z(t);y.default=y.ExpantaNum=y;typeof define=="function"&&define.amd?define(function(){return t}):typeof F<"u"&&F.exports&&(F.exports=t);const s={alphaone:new y("1"),alphatwo:new y("1e-9"),alphathree:new y("1e-9"),alphafour:new y("1e-9"),upgradesBought:{convertaone:new y("0"),upaonemult:new y("0"),upaonepower:new y("0"),autoclick:new y("0"),upconversion:new y("0"),bulkup:new y("0"),bulkautoclick:new y("0"),bulkconvertaone:new y("0"),convertatwo:new y("0"),autobulk:new y("0"),fixatwo:new y("0")},doubleaonemult:new y("2"),autoclickKey:0,autoclickFlag:!1,bulkLevel:new y("0"),bulkAutoclickKey:0,bulkAutoclickFlag:!1,conversions:new y("0"),conversionsTwo:new y("0"),autobulkFlag:!1,fixalphatwo:!1},B="exponentialtower_savefile";function K(e,r){for(const n in r){const a=r[n];if(typeof a=="object"&&a!==null){const i=e[n];n in e||(e[n]=Array.isArray(a)?[]:{}),typeof i=="object"&&i!==null&&K(i,a)}else e[n]=a}}function C(){const e=btoa(JSON.stringify(s));return localStorage.setItem(B,e),e}function re(){const e=localStorage.getItem(B);if(e===null)return;const r=JSON.parse(e.startsWith("{")?e:atob(e));K(s,r);for(const n in s)typeof s[n]=="string"&&(s[n]=new y(s[n]));for(const n in s.upgradesBought)typeof s.upgradesBought[n]=="string"&&(s.upgradesBought[n]=new y(s.upgradesBought[n]))}function te(){localStorage.removeItem(B),location.reload()}async function ne(){await navigator.clipboard.writeText(C()),alert("Copied to clipboard!")}function ae(){E("importareaid").style.display="block",E("saveimportconfirm").style.display="block"}function ie(){const r=E("importareaid").value;localStorage.setItem(B,r),location.reload()}function k(e){return s.upgradesBought[e]}function I(e){return e.toStringWithDecimalPlaces(3,void 0,3)}const h={convertaone:{buttonDiv:"convertaone",costDiv:"convertaonecost",cost:new y("1e15"),costType:"div",costFormula:function(){const e=y.pow(1e15,y.div(1,s.upgradesBought.upconversion.div(10).plus(1)));h.convertaone.cost=y.pow(e,s.conversions.plus(1))},currency:"alphaone",upgrFunction:function(){s.alphatwo=s.alphatwo.plus(1),s.conversions=s.conversions.plus(1)},functionfirst:!0},upaonemult:{buttonDiv:"upaonemult",costDiv:"upaonemultcost",cost:new y("1"),costType:"sub",costFormula:function(){h.upaonemult.cost=s.upgradesBought.upaonemult.plus(1)},currency:"alphatwo",upgrFunction:function(){s.doubleaonemult=s.doubleaonemult.plus(1)}},upaonepower:{buttonDiv:"upaonepower",costDiv:"upaonepowercost",cost:new y("1"),costType:"sub",costFormula:function(){h.upaonepower.cost=s.upgradesBought.upaonepower.plus(1)},currency:"alphatwo",upgrFunction:function(){s.doubleaonemult=s.doubleaonemult.pow(1.1)}},autoclick:{buttonDiv:"autoclick",costDiv:"autoclickcost",cost:new y("1e50"),costType:"sub",costFormula:function(){h.autoclick.cost=y.pow(1e50,s.upgradesBought.autoclick.plus(1)),s.upgradesBought.autoclick.gt(25)&&(h.autoclick.cost=new y("Infinity"))},currency:"alphaone",upgrFunction:function(){s.upgradesBought.autoclick.lte(25)&&(s.autoclickKey=1e3/s.upgradesBought.autoclick.toNumber()),s.autoclickFlag=!0}},upconversion:{buttonDiv:"upconversion",costDiv:"upconversioncost",cost:new y("22"),costType:"sub",costFormula:function(){h.upconversion.cost=y.pow(3,s.upgradesBought.upconversion).times(22)},currency:"alphatwo",upgrFunction:function(){h.convertaone.costFormula()}},bulkup:{buttonDiv:"bulkup",costDiv:"bulkupcost",cost:new y("1e1000"),costType:"div",costFormula:function(){h.bulkup.cost=y.pow(new y("1e1000"),y.pow(10,s.upgradesBought.bulkup))},currency:"alphaone",upgrFunction:function(){s.bulkLevel=s.bulkLevel.plus(1)}},bulkautoclick:{buttonDiv:"bulkautoclick",costDiv:"bulkautoclickcost",cost:new y("1e1000"),costType:"div",costFormula:function(){h.bulkautoclick.cost=y.pow(new y("1e1000"),s.upgradesBought.bulkautoclick.plus(1)),s.upgradesBought.bulkautoclick.gt(10)&&(h.bulkautoclick.cost=new y("Infinity"))},currency:"alphaone",upgrFunction:function(){s.upgradesBought.bulkautoclick.lte(10)&&(s.bulkAutoclickKey=1e3/s.upgradesBought.bulkautoclick.toNumber()),s.bulkAutoclickFlag=!0}},bulkconvertaone:{buttonDiv:"bulkconvertaone",costDiv:"bulkconvertaonecost",cost:new y("1e15"),costType:"div",costFormula:function(){const e=y.pow(1e15,y.div(1,s.upgradesBought.upconversion.div(10).plus(1)));h.bulkconvertaone.cost=y.pow(e,s.conversions.plus(new y.pow(10,s.bulkLevel)))},currency:"alphaone",upgrFunction:function(){s.alphatwo=s.alphatwo.plus(new y.pow(10,s.bulkLevel)),s.conversions=s.conversions.plus(new y.pow(10,s.bulkLevel))},functionfirst:!0},convertatwo:{buttonDiv:"convertatwo",costDiv:"convertatwocost",cost:new y("1e100"),costType:"div",costFormula:function(){h.convertatwo.cost=y.pow(1e100,s.conversionsTwo.plus(1))},currency:"alphatwo",upgrFunction:function(){s.alphathree=s.alphathree.plus(1),s.conversionsTwo=s.conversionsTwo.plus(1)},functionfirst:!0},autobulk:{buttonDiv:"autobulk",costDiv:"autobulkcost",cost:new y("1"),costType:"sub",costFormula:function(){s.upgradesBought.autobulk.lte(10)?h.autobulk.cost=new y("1"):h.autobulk.cost=y.times(10,y.pow(3,s.upgradesBought.autobulk.minus(10).times(10)))},currency:"alphathree",upgrFunction:function(){s.autobulkFlag=!0}},fixatwo:{buttonDiv:"fixatwo",costDiv:"fixatwocost",cost:new y("30"),costType:"sub",costFormula:function(){s.upgradesBought.fixatwo.gt(0)?h.fixatwo.cost=new y("Infinity"):h.fixatwo.cost=new y("30")},currency:"alphathree",upgrFunction:function(){s.fixalphatwo=!0}}};function O(e,r,n,a="sub"){let i="",u="Cost:";switch(n){case"alphaone":i="α<sub>1</sub>";break;case"alphatwo":i="α<sub>2</sub>";break;case"alphathree":i="α<sub>3</sub>";break;case"alphafour":i="α<sub>4</sub>";break}a==="div"&&(u="DivCost:"),E(e).innerHTML=`${u} ${I(r)} ${i}`}const oe=(e,r)=>Object.keys(e).find(n=>e[n]===r);function M(e){if(s[e.currency].gte(e.cost)){e.costType==="sub"?s[e.currency]=s[e.currency].minus(e.cost):s[e.currency]=s[e.currency].div(e.cost);const r=oe(h,e);s.upgradesBought[r]=s.upgradesBought[r].plus(1),e.functionfirst?(e.upgrFunction(),e.costFormula()):(e.costFormula(),e.upgrFunction()),e.costType==="sub"?O(e.costDiv,e.cost,e.currency,"sub"):O(e.costDiv,e.cost,e.currency,"div")}}function ue(){for(const e in h){const r=h[e];r.costFormula(),r.costType==="sub"?O(r.costDiv,r.cost,r.currency,"sub"):O(r.costDiv,r.cost,r.currency,"div")}}E("convertaone").onclick=()=>M(h.convertaone);E("upaonemult").onclick=()=>M(h.upaonemult);E("upaonepower").onclick=()=>M(h.upaonepower);E("autoclick").onclick=()=>M(h.autoclick);E("upconversion").onclick=()=>M(h.upconversion);E("bulkup").onclick=()=>M(h.bulkup);E("bulkconvertaone").onclick=()=>M(h.bulkconvertaone);E("bulkautoclick").onclick=()=>M(h.bulkautoclick);E("convertatwo").onclick=()=>M(h.convertatwo);E("autobulk").onclick=()=>M(h.autobulk);E("fixatwo").onclick=()=>M(h.fixatwo);re();ue();function se(){window.scrollTo(0,document.body.scrollHeight)}window.onload=se;function Z(){s.alphaone=s.alphaone.times(s.doubleaonemult)}function G(e,r){e=new y.pow(10,e),s.alphaone=s.alphaone.times(s.doubleaonemult.pow(e))}E("doubleaone").onclick=()=>{Z()};E("bulkdoubleaone").onclick=()=>{G(s.bulkLevel)};let S,L,x;k("autoclick").gt(0)&&(clearInterval(S),S=setInterval(()=>{Z()},s.autoclickKey));k("bulkautoclick").gt(0)&&(clearInterval(L),L=setInterval(()=>{G(s.bulkLevel)},s.bulkAutoclickKey));if(k("autobulk").gt(0))if(clearInterval(x),k("autobulk").lte(10)){const e=1e3/k("autobulk").toNumber();x=setInterval(()=>{s.bulkLevel=s.bulkLevel.plus(1),s.upgradesBought.bulkup=s.upgradesBought.bulkup.plus(1),h.bulkup.costFormula(),O(h.bulkup.costDiv,h.bulkup.cost,h.bulkup.currency,"div")},e)}else{const e=k("autobulk").minus(9);x=setInterval(()=>{s.bulkLevel=s.bulkLevel.plus(e),s.upgradesBought.bulkup=s.upgradesBought.bulkup.plus(e),h.bulkup.costFormula(),O(h.bulkup.costDiv,h.bulkup.cost,h.bulkup.currency,"div")},100)}setInterval(()=>{if(k("autoclick").gt(0)&&s.autoclickFlag&&(clearInterval(S),S=setInterval(()=>{Z()},s.autoclickKey),s.autoclickFlag=!1),k("bulkautoclick").gt(0)&&s.bulkAutoclickFlag&&(clearInterval(L),L=setInterval(()=>{G(s.bulkLevel)},s.autoclickKey),s.bulkAutoclickFlag=!1),k("autobulk").gt(0)&&s.autobulkFlag){if(clearInterval(x),k("autobulk").lte(10)){const e=1e3/k("autobulk").toNumber();x=setInterval(()=>{s.bulkLevel=s.bulkLevel.plus(1),s.upgradesBought.bulkup=s.upgradesBought.bulkup.plus(1),h.bulkup.costFormula(),O(h.bulkup.costDiv,h.bulkup.cost,h.bulkup.currency,"div")},e)}else{const e=k("autobulk").minus(9);x=setInterval(()=>{s.bulkLevel=s.bulkLevel.plus(e),s.upgradesBought.bulkup=s.upgradesBought.bulkup.plus(e),h.bulkup.costFormula(),O(h.bulkup.costDiv,h.bulkup.cost,h.bulkup.currency,"div")},100)}s.autobulkFlag=!1}s.fixalphatwo&&(s.alphatwo=s.alphaone.logBase(y.minus(10.1,s.upgradesBought.fixatwo.times(.1)))),h.convertaone.costFormula(),O(h.convertaone.costDiv,h.convertaone.cost,h.convertaone.currency,"div"),h.bulkconvertaone.costFormula(),O(h.bulkconvertaone.costDiv,h.bulkconvertaone.cost,h.bulkconvertaone.currency,"div")},100);function le(){E("alphaonetext").innerHTML=`You have ${I(s.alphaone)} α<sub>1</sub>`,E("alphatwotext").innerHTML=`You have ${I(s.alphatwo)} α<sub>2</sub>`,E("alphathreetext").innerHTML=`You have ${I(s.alphathree)} α<sub>3</sub>`,E("alphafourtext").innerHTML=`You have ${I(s.alphafour)} α<sub>4</sub>`,E("overview").innerHTML=`α<sub>1</sub>: ${I(s.alphaone)}<br>
        α<sub>2</sub>: ${I(s.alphatwo)}<br> 
        α<sub>3</sub>: ${I(s.alphathree)}<br>
        α<sub>4</sub>: ${I(s.alphafour)}<br>`,E("doubleaone").innerHTML=`${I(s.doubleaonemult)}x α<sub>1</sub>`,E("bulkdoubleaone").innerHTML=`${I(s.doubleaonemult)}x α<sub>1</sub> (x${I(new y.pow(10,s.bulkLevel))})`,E("bulkconvertaone").innerHTML=`Convert α<sub>1</sub> to α<sub>2</sub> (x${I(new y.pow(10,s.bulkLevel))})`}function fe(){k("bulkup").gt(0)?(E("bulkdoubleaone").removeAttribute("disabled"),E("bulkconvertaone").removeAttribute("disabled"),E("bulkautoclick").removeAttribute("disabled")):(E("bulkdoubleaone").setAttribute("disabled","disabled"),E("bulkconvertaone").setAttribute("disabled","disabled"),E("bulkautoclick").setAttribute("disabled","disabled"));for(const e in h){const r=h[e];s[r.currency].gte(r.cost)?E(r.buttonDiv).removeAttribute("disabled"):E(r.buttonDiv).setAttribute("disabled","disabled")}}setInterval(()=>{le(),fe()},100);setInterval(()=>{C()},4e3);E("wipesave").onclick=()=>{te()};E("export").onclick=()=>{ne()};E("import").onclick=()=>{ae()};E("saveimportconfirm").onclick=()=>{ie()}});export default ce();
